var requirejs,require,define;!function(global,setTimeout){var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.3",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;function commentReplace(e,t){return t||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){var n;if(e)for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}function eachReverse(e,t){var n;if(e)for(n=e.length-1;-1<n&&(!e[n]||!t(e[n],n,e));n-=1);}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(n,e,r,i){return e&&eachProp(e,function(e,t){!r&&hasProp(n,t)||(!i||"object"!=typeof e||!e||isArray(e)||isFunction(e)||e instanceof RegExp?n[t]=e:(n[t]||(n[t]={}),mixin(n[t],e,r,i)))}),n}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=undefined}void 0===require||isFunction(require)||(cfg=require,require=undefined),req=requirejs=function(e,t,n,r){var i,a,o=defContextName;return isArray(e)||"string"==typeof e||(a=e,isArray(t)?(e=t,t=n,n=r):e=[]),a&&a.context&&(o=a.context),(i=getOwn(contexts,o))||(i=contexts[o]=req.s.newContext(o)),a&&i.configure(a),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=void 0!==setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(t){req[t]=function(){var e=contexts[defContextName];return e.require[t].apply(e,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,t,n){var r,i=e&&e.config||{};if(isBrowser)return(r=req.createNode(i,t,n)).setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),!r.attachEvent||r.attachEvent.toString&&r.attachEvent.toString().indexOf("[native code")<0||isOpera?(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)),r.src=n,i.onNodeCreated&&i.onNodeCreated(r,i,t,n),currentlyAddingScript=r,baseElement?head.insertBefore(r,baseElement):head.appendChild(r),currentlyAddingScript=null,r;if(isWebWorker)try{setTimeout(function(){},0),importScripts(n),e.completeLoad(t)}catch(a){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,a,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(mainScript=(src=mainScript.split("/")).pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,n,t){var r,i;"string"!=typeof e&&(t=n,n=e,e=null),isArray(n)||(t=n,n=null),!n&&isFunction(t)&&(n=[],t.length&&(t.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,t){n.push(t)}),n=(1===t.length?["require"]:["require","exports","module"]).concat(n))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript())&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")]),i?(i.defQueue.push([e,n,t]),i.defQueueMap[e]=!0):globalDefQueue.push([e,n,t])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}function newContext(l){var n,e,f,u,c,m={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},d={},p={},r={},g=[],h={},i={},v={},b=1,y=1;function x(e,t,n){var r,i,a,o,s,l,u,c,d,p,f=t&&t.split("/"),g=m.map,h=g&&g["*"];if(e&&(l=(e=e.split("/")).length-1,m.nodeIdCompat&&jsSuffixRegExp.test(e[l])&&(e[l]=e[l].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&f&&(e=f.slice(0,f.length-1).concat(e)),function(e){var t,n;for(t=0;t<e.length;t++)if("."===(n=e[t]))e.splice(t,1),t-=1;else if(".."===n){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;0<t&&(e.splice(t-1,2),t-=2)}}(e),e=e.join("/")),n&&g&&(f||h)){e:for(a=(i=e.split("/")).length;0<a;a-=1){if(s=i.slice(0,a).join("/"),f)for(o=f.length;0<o;o-=1)if((r=getOwn(g,f.slice(0,o).join("/")))&&(r=getOwn(r,s))){u=r,c=a;break e}!d&&h&&getOwn(h,s)&&(d=getOwn(h,s),p=a)}!u&&d&&(u=d,c=p),u&&(i.splice(0,c,u),e=i.join("/"))}return getOwn(m.pkgs,e)||e}function w(t){isBrowser&&each(scripts(),function(e){if(e.getAttribute("data-requiremodule")===t&&e.getAttribute("data-requirecontext")===f.contextName)return e.parentNode.removeChild(e),!0})}function C(e){var t=getOwn(m.paths,e);if(t&&isArray(t)&&1<t.length)return t.shift(),f.require.undef(e),f.makeRequire(null,{skipMap:!0})([e]),!0}function $(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function k(e,t,n,r){var i,a,o,s,l=null,u=t?t.name:null,c=e,d=!0,p="";return e||(d=!1,e="_@r"+(b+=1)),l=(s=$(e))[0],e=s[1],l&&(l=x(l,u,r),a=getOwn(h,l)),e&&(l?p=n?e:a&&a.normalize?a.normalize(e,function(e){return x(e,u,r)}):-1===e.indexOf("!")?x(e,u,r):e:(l=(s=$(p=x(e,u,r)))[0],p=s[1],n=!0,i=f.nameToUrl(p))),{prefix:l,name:p,parentMap:t,unnormalized:!!(o=!l||a||n?"":"_unnormalized"+(y+=1)),url:i,originalName:c,isDefine:d,id:(l?l+"!"+p:p)+o}}function S(e){var t=e.id,n=getOwn(d,t);return n||(n=d[t]=new f.Module(e)),n}function P(e,t,n){var r=e.id,i=getOwn(d,r);!hasProp(h,r)||i&&!i.defineEmitComplete?(i=S(e)).error&&"error"===t?n(i.error):i.on(t,n):"defined"===t&&n(h[r])}function T(n,e){var t=n.requireModules,r=!1;e?e(n):(each(t,function(e){var t=getOwn(d,e);t&&(t.error=n,t.events.error&&(r=!0,t.emit("error",n)))}),r||req.onError(n))}function j(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(f.defQueueMap[t]=!0),g.push(e)}),globalDefQueue=[])}function A(e){delete d[e],delete p[e]}function I(){var e,r,t=1e3*m.waitSeconds,i=t&&f.startTime+t<(new Date).getTime(),a=[],o=[],s=!1,l=!0;if(!n){if(n=!0,eachProp(p,function(e){var t=e.map,n=t.id;if(e.enabled&&(t.isDefine||o.push(e),!e.error))if(!e.inited&&i)C(n)?s=r=!0:(a.push(n),w(n));else if(!e.inited&&e.fetched&&t.isDefine&&(s=!0,!t.prefix))return l=!1}),i&&a.length)return(e=makeError("timeout","Load timeout for modules: "+a,null,a)).contextName=f.contextName,T(e);l&&each(o,function(e){!function i(a,o,s){var e=a.map.id;a.error?a.emit("error",a.error):(o[e]=!0,each(a.depMaps,function(e,t){var n=e.id,r=getOwn(d,n);!r||a.depMatched[t]||s[n]||(getOwn(o,n)?(a.defineDep(t,h[n]),a.check()):i(r,o,s))}),s[e]=!0)}(e,{},{})}),i&&!r||!s||!isBrowser&&!isWebWorker||c||(c=setTimeout(function(){c=0,I()},50)),n=!1}}function o(e){hasProp(h,e[0])||S(k(e[0],null,!0)).init(e[1],e[2])}function a(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function s(e){var t=e.currentTarget||e.srcElement;return a(t,f.onScriptLoad,"load","onreadystatechange"),a(t,f.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function D(){var e;for(j();g.length;){if(null===(e=g.shift())[0])return T(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));o(e)}f.defQueueMap={}}return u={require:function(e){return e.require?e.require:e.require=f.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?h[e.map.id]=e.exports:e.exports=h[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(m.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},(e=function(e){this.events=getOwn(r,e.id)||{},this.map=e,this.shim=getOwn(m.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0}).prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,f.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();f.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;i[e]||(i[e]=!0,f.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,r=this.depExports,i=this.exports,a=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(a)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{i=f.execCb(n,a,r,i)}catch(s){e=s}else i=f.execCb(n,a,r,i);if(this.map.isDefine&&i===undefined&&((t=this.module)?i=t.exports:this.usingExports&&(i=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",T(this.error=e)}else i=a;if(this.exports=i,this.map.isDefine&&!this.ignore&&(h[n]=i,req.onResourceLoad)){var o=[];each(this.depMaps,function(e){o.push(e.normalizedMap||e)}),req.onResourceLoad(f,this.map,o)}A(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(f.defQueueMap,n)||this.fetch()}},callPlugin:function(){var l=this.map,u=l.id,e=k(l.prefix);this.depMaps.push(e),P(e,"defined",bind(this,function(e){var o,t,n,r=getOwn(v,this.map.id),i=this.map.name,a=this.map.parentMap?this.map.parentMap.name:null,s=f.makeRequire(l.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(e.normalize&&(i=e.normalize(i,function(e){return x(e,a,!0)})||""),P(t=k(l.prefix+"!"+i,this.map.parentMap,!0),"defined",bind(this,function(e){this.map.normalizedMap=t,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),void((n=getOwn(d,t.id))&&(this.depMaps.push(t),this.events.error&&n.on("error",bind(this,function(e){this.emit("error",e)})),n.enable()))):r?(this.map.url=f.nameToUrl(r),void this.load()):((o=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})})).error=bind(this,function(e){this.inited=!0,(this.error=e).requireModules=[u],eachProp(d,function(e){0===e.map.id.indexOf(u+"_unnormalized")&&A(e.map.id)}),T(e)}),o.fromText=bind(this,function(e,t){var n=l.name,r=k(n),i=useInteractive;t&&(e=t),i&&(useInteractive=!1),S(r),hasProp(m.config,u)&&(m.config[n]=m.config[u]);try{req.exec(e)}catch(a){return T(makeError("fromtexteval","fromText eval for "+u+" failed: "+a,a,[u]))}i&&(useInteractive=!0),this.depMaps.push(r),f.completeLoad(n),s([n],o)}),void e.load(l.name,s,o,m))})),f.enable(e,this),this.pluginMaps[e.id]=e},enable:function(){(p[this.map.id]=this).enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,r,i;if("string"==typeof e){if(e=k(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,i=getOwn(u,e.id))return void(this.depExports[t]=i(this));this.depCount+=1,P(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?P(e,"error",bind(this,this.errback)):this.events.error&&P(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id,r=d[n],hasProp(u,n)||!r||r.enabled||f.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(d,e.id);t&&!t.enabled&&f.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},(f={config:m,contextName:l,registry:d,defined:h,urlFetched:i,defQueue:g,defQueueMap:{},Module:e,makeModuleMap:k,nextTick:req.nextTick,onError:T,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var n=e.urlArgs;e.urlArgs=function(e,t){return(-1===t.indexOf("?")?"?":"&")+n}}var r=m.shim,i={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){i[t]?(m[t]||(m[t]={}),mixin(m[t],e,!0,!0)):m[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(v[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=f.makeShimExports(e)),r[t]=e}),m.shim=r),e.packages&&each(e.packages,function(e){var t;t=(e="string"==typeof e?{name:e}:e).name,e.location&&(m.paths[t]=e.location),m.pkgs[t]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(d,function(e,t){e.inited||e.map.unnormalized||(e.map=k(t,null,!0))}),(e.deps||e.callback)&&f.require(e.deps||[],e.callback)},makeShimExports:function(t){return function(){var e;return t.init&&(e=t.init.apply(global,arguments)),e||t.exports&&getGlobal(t.exports)}},makeRequire:function(a,o){function s(e,t,n){var r,i;return o.enableBuildCallback&&t&&isFunction(t)&&(t.__requireJsBuild=!0),"string"==typeof e?isFunction(t)?T(makeError("requireargs","Invalid require call"),n):a&&hasProp(u,e)?u[e](d[a.id]):req.get?req.get(f,e,a,s):(r=k(e,a,!1,!0).id,hasProp(h,r)?h[r]:T(makeError("notloaded",'Module name "'+r+'" has not been loaded yet for context: '+l+(a?"":". Use require([])")))):(D(),f.nextTick(function(){D(),(i=S(k(null,a))).skipMap=o.skipMap,i.init(e,t,n,{enabled:!0}),I()}),s)}return o=o||{},mixin(s,{isBrowser:isBrowser,toUrl:function(e){var t,n=e.lastIndexOf("."),r=e.split("/")[0];return-1!==n&&(!("."===r||".."===r)||1<n)&&(t=e.substring(n,e.length),e=e.substring(0,n)),f.nameToUrl(x(e,a&&a.id,!0),t,!0)},defined:function(e){return hasProp(h,k(e,a,!1,!0).id)},specified:function(e){return e=k(e,a,!1,!0).id,hasProp(h,e)||hasProp(d,e)}}),a||(s.undef=function(n){j();var e=k(n,a,!0),t=getOwn(d,n);t.undefed=!0,w(n),delete h[n],delete i[e.url],delete r[n],eachReverse(g,function(e,t){e[0]===n&&g.splice(t,1)}),delete f.defQueueMap[n],t&&(t.events.defined&&(r[n]=t.events),A(n))}),s},enable:function(e){getOwn(d,e.id)&&S(e).enable()},completeLoad:function(e){var t,n,r,i=getOwn(m.shim,e)||{},a=i.exports;for(j();g.length;){if(null===(n=g.shift())[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);o(n)}if(f.defQueueMap={},r=getOwn(d,e),!t&&!hasProp(h,e)&&r&&!r.inited){if(!(!m.enforceDefine||a&&getGlobal(a)))return C(e)?void 0:T(makeError("nodefine","No define call for "+e,null,[e]));o([e,i.deps||[],i.exportsFn])}I()},nameToUrl:function(e,t,n){var r,i,a,o,s,l,u=getOwn(m.pkgs,e);if(u&&(e=u),l=getOwn(v,e))return f.nameToUrl(l,t,n);if(req.jsExtRegExp.test(e))o=e+(t||"");else{for(r=m.paths,a=(i=e.split("/")).length;0<a;a-=1)if(s=getOwn(r,i.slice(0,a).join("/"))){isArray(s)&&(s=s[0]),i.splice(0,a,s);break}o=i.join("/"),o=("/"===(o+=t||(/^data\:|^blob\:|\?/.test(o)||n?"":".js")).charAt(0)||o.match(/^[\w\+\.\-]+:/)?"":m.baseUrl)+o}return m.urlArgs&&!/^blob\:/.test(o)?o+m.urlArgs(e,o):o},load:function(e,t){req.load(f,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=s(e);f.completeLoad(t.id)}},onScriptError:function(e){var n=s(e);if(!C(n.id)){var r=[];return eachProp(d,function(e,t){0!==t.indexOf("_@r")&&each(e.depMaps,function(e){if(e.id===n.id)return r.push(t),!0})}),T(makeError("scripterror",'Script error for "'+n.id+(r.length?'", needed by: '+r.join(", "):'"'),e,[n.id]))}}}).require=f.makeRequire(),req.sync=function(e,t){D();var n=S(k(null,undefined));if(n.skipMap=undefined,n.init(e,t,undefined,{enabled:!0}),I(),isArray(e)){var r=[];return each(e,function(e,t){r.push(h[e])}),r}},req.reg=function(e){return e.id!=undefined&&e["export"]!=undefined&&(h[e.id]=e["export"],!0)},f}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState||eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript}}(this,"undefined"==typeof setTimeout?undefined:setTimeout),window.localeFile=window.localeFile?window.localeFile:"app/widgets/app-lang_zh_CN",window.bossJS={init:function(e){if(e&&"object"==typeof e||(e={}),!e.jquery)if(window.jQuery&&jQuery.fn.jquery)e.jquery=window.jQuery;else{if(!window.$||!$.fn.jquery)throw new Error("jquery undefied");e.jquery=window.$}e.path||(e.path=""),require.reg({id:"jquery","export":e.jquery}),window._contextPath=e.path,require.config({baseUrl:_contextPath,shim:{"base/json2":{exports:"JSON"},"base/dotpl-js":{exports:"dotpl"}}});return require.sync(["app/core/app-jquery","app/core/app-core","base/dotpl-js","app/app-funcbase","app/widgets/window/app-messager","app/util/app-utils","app/widgets/window/app-dialog"],function(e,t,n,r,i,a,o){window.jQuery=e,window.$=e,window.$template=function(e,t){return n.applyTpl(e,t)},window.$messager=i,window.$utils=a,window.$app=window.$A=window.$a=t,require.sync(["bs-http-plugin/bs-ca-auth","bs-http-plugin/bs-doccamera","bs-http-plugin/bs-pd","bs-http-plugin/bs-pos","bs-http-plugin/bs-print","bs-http-plugin/data-transmit/socket"],function(e,t,n,r,i,a){window.bossJS={CA:e,DocCamera:t,PD:n,POS:r,Print:i,Socket:a}})}),bossJS}},define("app/core/app-class",[],function(){function r(e){if(!(this instanceof r)&&u(e))return a(e)}function i(e){var t,n;for(t in e)n=e[t],r.Mutators.hasOwnProperty(t)?r.Mutators[t].call(this,n):this.prototype[t]=n}function a(e){return e.extend=r.extend,e.implement=i,e}function t(){}r.create=function(e,t){function n(){e.apply(this,arguments),this.constructor===n&&this.initialize&&this.initialize.apply(this,arguments)}return u(e)||(t=e,e=null),t||(t={}),e||(e=t.Extends||r),(t.Extends=e)!==r&&s(n,e),i.call(n,t),a(n)},r.extend=function(e){return e||(e={}),e.Extends=this,r.create(e)},r.Mutators={Extends:function(e){var t=this.prototype,n=o(e.prototype);s(n,t),(n.constructor=this).prototype=n,this.superclass=e.prototype},Implements:function(e){l(e)||(e=[e]);for(var t,n=this.prototype;t=e.shift();)s(n,t.prototype||t)},Statics:function(e){s(this,e)}};var o=Object.__proto__?function(e){return{__proto__:e}}:function(e){return t.prototype=e,new t};function s(e,t){for(var n in t)"prototype"!==n&&(e[n]=t[n])}var n=Object.prototype.toString,l=Array.isArray;l||(l=function(e){return"[object Array]"===n.call(e)});var u=function(e){return"[object Function]"===n.call(e)};return r}),define("app/core/app-attribute",["require","exports","module"],function(e,t){var n={};n.initAttrs=function(e){var t,n=this.propsInAttrs||[],r=function(e,t){var n=[],r=e.constructor.prototype;for(;r;)r.hasOwnProperty("attrs")||(r.attrs={}),c(t,r.attrs,r),l(r.attrs)||n.unshift(r.attrs),r=r.constructor.superclass;for(var i={},a=0,o=n.length;a<o;a++)i=f(i,u(n[a]));return i}(this,n);for(a in e&&f(r,u(e)),r)if(r.hasOwnProperty(a)){var i="_onChange"+(t=a).charAt(0).toUpperCase()+t.substring(1);this[i]&&this.on("change:"+a,this[i])}for(var a in function(e,t){for(var n in t)if(t.hasOwnProperty(n))t[n].value}(0,r),this.attrs=r)if(r.hasOwnProperty(a)){var o=r[a];try{o.hasOwnProperty("value")&&o.setter&&o.setter.call(this,o.value,a),this.set(a,this.get(a))}catch(s){window.console&&console.log("A caught exception occurs: "+s)}}c(n,this,this.attrs,!0)},n.get=function(e){var t=this.attrs[e]||{},n=t.value;return t.getter?t.getter.call(this,n,e):n},n.set=function(e,t,n){var r={};d(e)?r[e]=t:(r=e,n=t),n||(n={});var i=this.__ready,a=!i||n.silent,o=this.attrs,s=this.__changedAttrs||(this.__changedAttrs={});for(e in r)if(r.hasOwnProperty(e)){var l=o[e]||(o[e]={});if(t=r[e],l.readOnly)throw"This attribute is readOnly: "+e;if(l.validator){var u=l.validator.call(this,t,e);if(!0!==u){n.error&&n.error.call(this,u);continue}}l.setter&&(t=l.setter.call(this,t,e));var c=i?this.get(e):null;p(c)&&p(t)&&(t=f(f({},c),t)),h(c,o[e].value=t)||(a?s[e]=[t,c]:this.trigger("change:"+e,t,c,e))}return this},n.change=function(){var e=this.__changedAttrs;if(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];this.trigger("change:"+t,n[0],n[1],t)}delete this.__changedAttrs}return this};var o=Object.prototype.toString,i=Array.isArray||function(e){return"[object Array]"===o.call(e)};function d(e){return"[object String]"===o.call(e)}function p(e){return e&&"[object Object]"===o.call(e)&&"isPrototypeOf"in e}function l(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function f(e,t){var n,r;for(n in t)t.hasOwnProperty&&t.hasOwnProperty(n)&&(r=t[n],i(r)?r=r.slice():p(r)&&(r=f(e[n]||{},r)),e[n]=r);return e}var s=Object.keys;s||(s=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t});var r=["value","getter","setter","validator","readOnly"];function u(e){for(var t in e=f({},e)){var n=e[t];p(n)&&a(n,r)||(e[t]={value:n})}return e}function a(e,t){for(var n=0,r=t.length;n<r;n++)if(e.hasOwnProperty(t[n]))return!0;return!1}function c(e,t,n,r){for(var i=0,a=e.length;i<a;i++){var o=e[i];if(o in n&&n.hasOwnProperty(o)){var s=n[o];t[o]=r?s.value:s}}}function g(e){return null==e||(d(e)||i(e))&&0===e.length||p(e)&&l(e)}function h(e,t){if(e===t)return!0;if(g(e)&&g(t))return!0;var n=o.call(e);if(n!=o.call(t))return!1;switch(n){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase;case"[object Array]":var r=e.toString(),i=t.toString();return-1===r.indexOf("[object")&&-1===i.indexOf("[object")&&r===i}if("object"!=typeof e||"object"!=typeof t)return!1;if(p(e)&&p(t)){if(!h(s(e),s(t)))return!1;for(var a in e)if(e[a]!==t[a])return!1;return!0}return!1}return n}),define("app/core/app-events",[],function(){var u=/\s+/;function o(){}o.prototype.on=function(e,t,n){var r,i;if(!t)return this;for(r=this.__events||(this.__events={}),e=e.split(u);i=e.shift();)(r[i]||(r[i]=[])).push(t,n);return this},o.prototype.once=function(e,t,n){var r=this,i=function(){r.off(e,i),t.apply(n||r,arguments)};return this.on(e,i,n)},o.prototype.off=function(e,t,n){var r,i,a,o;if(!(r=this.__events))return this;if(!(e||t||n))return delete this.__events,this;for(e=e?e.split(u):s(r);i=e.shift();)if(a=r[i])if(t||n)for(o=a.length-2;0<=o;o-=2)t&&a[o]!==t||n&&a[o+1]!==n||a.splice(o,2);else delete r[i];return this},o.prototype.emit=o.prototype.trigger=function(e){var t,n,r,i,a,o,s=[],l=!0;if(!(t=this.__events))return this;for(e=e.split(u),a=1,o=arguments.length;a<o;a++)s[a-1]=arguments[a];for(;n=e.shift();)(r=t.all)&&(r=r.slice()),(i=t[n])&&(i=i.slice()),"all"!==n&&(l=c(i,s,this)&&l),l=c(r,[n].concat(s),this)&&l;return l},o.prototype.hasBindEvent=function(e){var t=(this.__events||(this.__events={}))[e];return t&&1<t.length};var s=Object.keys;function c(e,t,n){var r=!0;if(e){var i=0,a=e.length,o=t[0],s=t[1],l=t[2];switch(t.length){case 0:for(;i<a;i+=2)r=!1!==e[i].call(e[i+1]||n)&&r;break;case 1:for(;i<a;i+=2)r=!1!==e[i].call(e[i+1]||n,o)&&r;break;case 2:for(;i<a;i+=2)r=!1!==e[i].call(e[i+1]||n,o,s)&&r;break;case 3:for(;i<a;i+=2)r=!1!==e[i].call(e[i+1]||n,o,s,l)&&r;break;default:for(;i<a;i+=2)r=!1!==e[i].apply(e[i+1]||n,t)&&r}}return r}return s||(s=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),o.mixTo=function(t){var e;e=t,t="[object Function]"===Object.prototype.toString.call(e)?t.prototype:t;var n=o.prototype,r=new o;for(var i in n)n.hasOwnProperty(i)&&a(i);function a(e){t[e]=function(){return n[e].apply(r,Array.prototype.slice.call(arguments)),this}}},o}),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,a,o,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(l)){for(a=l.length,n=0;n<a;n+=1)o[n]=str(n,l)||"null";return i=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+s+"]":"["+o.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(a=rep.length,n=0;n<a;n+=1)"string"==typeof rep[n]&&(i=str(r=rep[n],l))&&o.push(quote(r)+(gap?": ":":")+i);else for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(i=str(r,l))&&o.push(quote(r)+(gap?": ":":")+i);return i=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+s+"}":"{"+o.join(",")+"}",gap=s,i}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(indent=gap="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if((rep=t)&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&((r=walk(i,n))!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("base/json2",function(){}),define("app/core/app-core",["jquery","app/core/app-jquery","base/json2"],function($){var $A=undefined,$hostUrl="",$contextPath,$caInfo=null,_caCryptoType,Sk;return $A=function(e,t){return"function"==typeof $A._exfn?$A._exfn(e,t):$(e,t)},$A.debug=!1,function(e){for(var t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var r=t[n].split("=");if("__debug"==r[0]&&"true"==r[1])return $A.debug=!0}}(),$.extend($A,{develop:!0,keyCode:{ENTER:13,ESC:27,END:35,HOME:36,SHIFT:16,TAB:9,LEFT:37,RIGHT:39,UP:38,DOWN:40,DELETE:46,BACKSPACE:8,HOME:36,END:35,PLUS:187,PLUS1:107,MINUS:189,MINUS1:109,POINT:190,POINT1:110,PgUp:33,PgDn:34,Z:90},containKeyCode:function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(isNaN(r)){if(r.keyCode!=e.keyCode)continue;if(r.ctrlKey!=undefined&&r.ctrlKey!=e.ctrlKey)continue;if(r.shiftKey!=undefined&&r.shiftKey!=e.shiftKey)continue;return!0}if(e.keyCode==r)return!0}return!1},statusCode:{ok:200,error:300,timeout:"250",internalError:500,notFound:404},jsattrs:{PARAM:"__jsparam",OBJECT:"__jsobj"},initMethods:{},destroyMethods:{},status:{spliter:!0},eventType:{pageLoad:"onload",pageDestroy:"pageDestroy"},regInitMethod:function(e,t){var n=this.initMethods;if($.isPlainObject(e))n=$.extend(n,e);else if($.isFunction(e))e.appid?(n[e.appid]=null,delete n[e.appid]):(e.appid=this.nextId(),n[e.appid]=e);else{if("string"!=typeof e)throw"valid component's constructor";t&&$.isFunction(t)?n[t.appid=e]=t:(n[e]=null,delete n[e])}},getPageComponens:function(e){e=e||$A.getContainer();if(!$(e).data("componens")){var t=$("[name=componens]",e),n=null;if(0<t.length){var r=t.val().trim();n=$.parseJSON(r)}$(e).data("componens",n),$("[name=componens]",e).remove()}return $(e).data("componens")},cehckPageComponensById:function(e){var t=this.getPageComponens(),n=!0;if(t)for(var r=0;r<t.length;r++)cmp=t[r],cmp.id==e&&1==cmp.hidden&&(n=!1);return n},checkPageComponens:function(e){var t,n=this.getPageComponens(e);if(n)for(var r=0;r<n.length;r++)1==(t=n[r]).hidden&&$("[id="+t.id+"]",e).remove()},initCalls:function(e){var t=$A.initMethods;for(name in t)t[name](e)},init:function(e){var o=$(e||"body");o.clearAppJsObject();var t=$("[name=jsRequire]",o);if(this.checkPageComponens(o),0!=t.length){var i=new Array,s=new Array;if(t.each(function(e,t){var n=$(this),r=n.val();r&&(s.push(n.attr("id")),i.push(r))}),0==i.length)return o.css("visibility",""),void $A.initCalls(o);require(i,function(){var t=new Array,n=new Array,r=arguments;if($.each(r,function(e){null!=r[e]&&null!=s[e]&&(t.push(r[e]),n.push(s[e]))}),0<n.length&&(o.setAppJsObject(n,t),function(e,t){if(!e||!e[0])return;var n=e[0].beforePageInit;if(!$.isFunction(n))return;n(t,t.data("uiPageModel")),t.css("visibility","")}(t,o),o.data("onPageLoad"))){var e=o.data("onPageLoad");try{var i=new Function(n,"return ("+e+")").apply(this,t);o.one($A.eventType.pageLoad,{pageLoadFunc:i,uiPageModel:o.data("uiPageModel")},function(e){e.data.pageLoadFunc&&e.data.pageLoadFunc.call(t[0],e.data.uiPageModel,o)})}catch(a){return window.alert(a),{}}}$A.initCalls(o)}),t.remove(),$A.resolveUiPageModel(o),o.removeData("onPageLoad");var n=$(">div.__uiPageLoad",o);if(0<n.length){var r=n.text();o.data("onPageLoad",r),n.remove()}}else $A.initCalls(o)},resolveUiPageModel:function(e){var t=$(">div.__uiPageModel",e);if(0<t.length){var n=t.text();e.data("uiPageModel",$.parseJSON(n)),t.remove()}else e.data("uiPageModel",{innerModel:!0})},regDestroyMethod:function(e,t){var n=this.destroyMethods;if($.isPlainObject(e))n=$.extend(n,e);else if($.isFunction(e))e.appid?(n[e.appid]=null,delete n[e.appid]):(e.appid=this.nextId(),n[e.appid]=e);else{if("string"!=typeof e)throw"valid component's destroy";t&&$.isFunction(t)?n[t.appid=e]=t:(n[e]=null,delete n[e])}},destroyCalls:function(e,t){var n=this.destroyMethods;for(name in n)n[name](e,t)},boot:function(e){this.options=$.extend(this.options,e),this.init();var t=$(document),n=this;t.isBind(this.eventType.pageDestroy)||t.bind(this.eventType.pageDestroy,function(e){var t=e.target;n.destroyCalls(t,e)})},nextId:(Sk=0,function(e){if(e&&1<e){for(var t=new Array,n=0;n<e;n++)Sk++,t.push("app_"+Sk);return t}return++Sk}),jsonEval:function(json,context){try{if(context){var evalstr="";for(var key in context)evalstr+="var "+key+'=context["'+key+'"];';return eval(evalstr),eval("("+json+")")}return eval("("+json+")")}catch(e){return{}}},toJsonString:function(e,t,n){return JSON.stringify(e,t,n)},log:function(e){this.develop&&(window.console?console.log(e):alert(e))},uuid:function(e){return(e=e===undefined?"bs_":e)+this.nextId()},getAttrFromElement:function(e){try{var t=function(e){var r={};e.attributes&&$.each(e.attributes,function(e,t){var n=t.name.toLowerCase();"true"==t.value?r[n]=!0:"false"==t.value?r[n]=!1:t.value&&(r[n]=$.fn.escapeHtml(t.value))});return r}(e[0]),n=e.getJsonAttr("_options");return t.data&&(t.data=e.getJsonAttr("data")),t.selectednode&&(t.selectednode=e.getJsonAttr("selectednode")),t.events&&$.extend(t,e.getJsEvent(t.events)),$.extend(t,n)}catch(i){var r=e.attr("id");throw r||(r=e[0].outerHTML),new Error("组件["+r+"]获取属性出错.")}},destroyDom:function(e){for(var t=$A.options.getPlugins(),n=[],r=0;r<t.length;r++){var i,a=t[r];(i=a.className?$("."+a.className,e):$(".app-"+a.pluginName,e)).length&&i[a.pluginName]&&n.push({name:a.pluginName,jq:i})}var o=!1;for(r=0;r<n.length;r++){var s=n[r];o=!1,$.each(s.jq,function(e,t){var n=$("input:first-child",t).data(s.name);n&&(n.destroy(),o=!0)}),0==o&&s.jq[s.name]("destroy")}},getComponent:function(e,t){if(!$A.debug)return e.data(t);var n=e.data();if(n){for(var r=["textbox","number","money","comboztree","combogrid","checkbox","suggest","datetime","typeahead","reference","combobox"],i=[],a=0;a<r.length;a++){var o=r[a];n[o]&&i.push(o)}if(0==i.length)return null;if(1==i.length){if(i[0]==t)return n[t];throw new Error("该组件已经声明为["+i[0]+"],无法重复声明为["+t+"]")}throw new Error("无法捕获的异常")}},componentMethodApply:function(e,t,n){if(!e)throw new Error("调用未初始化的组件方法");var r=e[t];if($.isFunction(r))return r.apply(e,n);throw new Error("组件未声明["+t+"]方法")},throwCompMethodError:function(e,t,n,r){var i=e.attr("id"),a="",o=function(e,t){if("调用未初始化的组件方法"==e.message){var n=t.parent();if(!n.hasClass("app-wrapper"))return"";if(n.hasClass("app-textbox"))return"textbox";if(n.hasClass("app-combobox"))return"combobox";if(n.hasClass("app-number"))return"number";if(n.hasClass("app-money"))return"money";if(n.hasClass("app-comboztree"))return"comboztree";if(n.hasClass("app-combogrid"))return"combogrid";if(n.hasClass("app-typeahead"))return"typeahead";if(n.hasClass("app-suggest"))return"suggest";if(n.hasClass("app-datatime"))return"datatime"}return""}(r,e);throw i||(i=e[0].outerHTML),a="通过元素["+i+"]调用类型为["+t+"]组件的["+n+"]方法时出现异常",a+=o?":元素已声明为类型["+o+"]的组件:"+r:":"+r,new Error(a)},throwCompInitError:function(e,t){var n=e.attr("id");throw n||(n=e[0].outerHTML),new Error("元素["+n+"]已经初始化为["+t+"]组件:无法重复初始化")},showWaitScreen:function(e){void 0===e&&(e="正在努力加载中..."),$a.$wait?($a.$wait.find("#waitScreenMsg").text(e),$a.$wait.show()):($a.$wait=$('<div id="waitMask" class="dialog-mask" style="z-index:999999999;display:block;"><div>'),$a.$wait.append($('<div style="width: 150px;height: 150px;margin: auto;position: absolute;top: 0;left: 0;bottom: 0;right: 0;color: #fff;font-size: 18px;">\t\t\t\t\t\t\t\t\t<div style="width: 124px;height: 124px;background:url(resources/common/themes/default/images/loading2.gif) no-repeat center center;margin-bottom: 5px;"></div>\t\t\t\t\t\t\t\t\t<div id="waitScreenMsg">'+e+"</div></div>")),$a.$wait.appendTo("body"))},hideWaitScreen:function(){$a.$wait&&$a.$wait.hide()},setContextPath:function(e){$contextPath=e},getContextPath:function(){return $contextPath},getCaProvider:function(){return _caProvider},setCaInfo:function(e){$caInfo=e},getCaInfo:function(){return $caInfo},getHostUrl:function(){var e=window.location;try{$contextPath||($contextPath=_contextPath)}catch(t){}return""==$hostUrl&&($hostUrl=e.protocol+"//"+e.host+$contextPath+"/"),$hostUrl},getCaCryptoType:function(){return _caCryptoType},setCaCryptoType:function(e){_caCryptoType=e}})}),define("base/pinyin",[],function(){var r={};function l(e,t){for(var n in r)if(!(r[n].indexOf(e)<0))return t?t(n):n;return!1}function t(e){return e.substr(0,1).toUpperCase()}function n(e){return e.substr(0,1).toUpperCase()}function i(e,t){for(var n=e.length,r="",i=new RegExp("[a-zA-Z0-9- ]"),a=0;a<n;a++){var o=e.charAt(a),s=l(o,t);i.test(o)?r+=o:!1!==s&&(r+=s)}for(r=r.replace(/ /g,"-");0<r.indexOf("--");)r=r.replace("--","-");return r}return{toInitials:function(e){return i(e,t)},toUpperInitials:function(e){return i(e,n)},toPinyin:function(e){return i(e)},toCapPinyin:function(e){return i(e)}}}),define("app/core/app-base",["app/core/app-class","app/core/app-attribute","app/core/app-events"],function(e,t,n){return e.create({Implements:[t,n],initialize:function(e){this.initAttrs(e),function(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r="_onChange"+((i=n).charAt(0).toUpperCase()+i.substring(1));e[r]&&e.on("change:"+n,e[r])}var i}(this,this.attrs)},destroy:function(){for(var e in this)this.hasOwnProperty(e)&&delete this[e]},bind:function(e,t){var n=t;for(var r in 1==arguments.length&&(n=e),n)this.on(r,n[r])},unbind:function(e,t){if("string"==typeof t&&this.off(t),"array"==typeof t)for(var n=0,r=t.length;n<r;n++)this.off(t[n])}})}),define("app/core/app-options-helper",["app/core/app-base"],function(e){return ConfigHelper=e.extend({propsInAttrs:["configData","columns","buttons","editors"],attrs:{configData:{},columns:{},buttons:{},editors:{}},initialize:function(e){(e=e||{}).configData||(e={configData:e}),this.sourceData=e.configData||e,ConfigHelper.superclass.initialize.call(this,e),this.configData&&(this.configData.columns&&this.addColumns(this.configData.columns),this.configData.frozenColumns&&this.addColumns(this.configData.frozenColumns),this.configData.frozenColumnsRight&&this.addColumns(this.configData.frozenColumnsRight),this.configData.toolbar&&this.addButtons(this.configData.toolbar))},addColumns:function(e){if(e)for(var t=0;t<e.length;t++)for(var n=0;n<e[t].length;n++)this.columns[e[t][n].id]=e[t][n],e[t][n]&&e[t][n].buttons&&this.addButtons(e[t][n].buttons),e[t][n]&&e[t][n].editor&&this.addEditors(e[t][n].id,e[t][n].editor)},addEditors:function(e,t){t.options=t.options||{},this.editors[e]=t.options},addButtons:function(e){if(e){for(var t=[],n=0;n<e.length;n++)this.buttons[e[n].id]=e[n],$A.cehckPageComponensById(e[n].id)||t.push(n);for(n=0;n<t.length;n++)e.splice(t[n]-n,1)}},getButton:function(e){var t=this.buttons[e];return new ConfigHelper(t)},getColumn:function(e){var t=this.columns[e];return new ConfigHelper(t)},getEditor:function(e){var t=this.editors[e];return new ConfigHelper(t)},setAttr:function(e,t){this.sourceData[e]=t},setAttrs:function(e){if(e)for(var t in e)this.sourceData[t]=e[t]}}),ConfigHelper}),define("app/core/app-jquery",["jquery","app/core/app-core","base/pinyin","app/core/app-options-helper"],function(f,a,e,o){return f.emptyFunction=function(){},f.isEmpty=function(e,t){return null===e||e===undefined||f.isArray(e)&&!e.length||!t&&""===e},f.extend(f.fn,{escapeHtml:function(e){return e&&(e=(e=(e=(e=e.replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/"/g,"&quot;")).replace(/'/g,"&#039;")),e},unescapeHtml:function(e){return e&&(e=(e=(e=(e=e.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&quot;/g,'"')).replace(/&#039;/g,"'")),e},initPageUI:function(){a.init(this)},clearAppJsObject:function(){f(this).removeAttr("__jsappobj"),f(this)[0].__jsappobj=null},setAppJsObject:function(e,t){f(this).attr("__jsappobj","true"),f(this)[0].__jsappobj={param:e,objs:t}},getAppJsObject:function(){var e=f(this),t=e.parents("[__jsappobj]"),n=e[0].__jsappobj,i=null,a=null;return null!=n&&"object"==typeof n&&f.isArray(n.param)&&f.isArray(n.objs)?(i=n.param,a=n.objs):(i=[],a=[]),t.each(function(){f(this);var e=this.__jsappobj;if(null!=e&&f.isArray(e.param)&&f.isArray(e.objs))for(var t=e.param,n=e.objs,r=0;r<t.length;r++)f.inArray(t[r],i)<0&&(i.push(t[r]),a.push(n[r]))}),0==i.length?null:{param:i.join(","),objs:a}},getJsFunction:function(e,t){var n=f(this).getAppJsObject();return n?new Function(n.param,"return function(){"+e+"};").apply(n,n.objs):new Function(e)},getJsonAttr:function(e){var t=f(this).getAppJsObject()||{param:"",objs:[]},n=f(this).attr(e),r=f(this).attr("id");n=new Function(t.param,"return ("+n+")").apply(this,t.objs);if(t.objs&&0<t.objs.length&&r){var i=t.objs[0];if(i.uiExtConfig){var a=i.uiExtConfig;a[r]&&f.isFunction(a[r])&&(n.beforeRender=function(e){var t=new o(e);a[r].call(this,t)})}}return n},getPageJsProperty:function(e,t){var n=f(this).getAppJsObject();return n?new Function(n.param,"if (typeof "+e+" !== 'undefined') return "+e+";").apply(n,n.objs):null},getJsCacheFunc:function(e,t){var n=f(this),r=n.data("jsfunction");return r||(r=n.getJsFunction(e,t),n.data("jsfunction",r),r)},getJsEvent:function(e){var t=f(this).getAppJsObject();return t?new Function(t.param,"var e = "+e+";return e;").apply(t,t.objs):a.jsonEval(e)},isTag:function(e){return!!e&&f(this)[0].tagName.toLowerCase()==e},hoverClass:function(e,n){var r=e||"hover";return this.each(function(){var e,t=f(this);t.hover(function(){e&&clearTimeout(e),t.addClass(r)},function(){e=setTimeout(function(){t.removeClass(r)},n||10)})})},focusClass:function(e){var t=e||"textInputFocus";return this.each(function(){f(this).focus(function(){f(this).addClass(t)}).blur(function(){f(this).removeClass(t)})})},isBind:function(e){var t=f(this).data("events");return t&&e&&t[e]},cssNum:function(e){var t=f(this).css(e);return 1*t.substring(0,t.indexOf("px"))},equalObject:function(e){if(0==this.length&&(null==e||0==e.length))return!0;if(null==e)return!1;if(this.length!=e.length)return!1;for(var t=0;t<e.length;t++)if(this[t]!=e[t])return!1;return!0},parseOptions:function(n,e){var t=f(n),r={},i=f(n).getAppJsObject()||{param:"",objs:[]},a=f.trim(t.attr("data-options"));if(a){"{"!=a.substring(0,1)&&(a="{"+a+"}");r=new Function(i.param,"return ("+a+")").apply(this,i.objs)}for(key in r)f.isEmpty(r[key])&&delete r[key];if(f.map(["width","height","left","top","minWidth","maxWidth","minHeight","maxHeight"],function(e){n.style||console.log(n);var t=f.trim(n.style[e]||"");t&&(-1==t.indexOf("%")&&(t=parseInt(t)||undefined),r[e]=t)}),e){for(var o={},s=0;s<e.length;s++){var l=e[s];if("string"==typeof l)o[l]=t.attr(l);else for(var u in l){var c=l[u];"boolean"==c?o[u]=t.attr(u)?"true"==t.attr(u):undefined:"number"==c&&(o[u]="0"==t.attr(u)?0:parseFloat(t.attr(u))||undefined,!o[u]&&r[u]&&(r[u]=parseFloat(r[u])))}}f.extend(r,o)}return r},_outerWidth:function(e){return e==undefined?this[0]==window?this.width()||document.body.clientWidth:this.outerWidth()||0:this._size("width",e)},_outerHeight:function(e){return e==undefined?this[0]==window?this.height()||document.body.clientHeight:this.outerHeight()||0:this._size("height",e)},_scrollLeft:function(e){return e==undefined?this.scrollLeft():this.each(function(){f(this).scrollLeft(e)})},parseValue:function(e,t,n,r){r=r||0;var i=f.trim(String(t||""));return"%"==i.substr(i.length-1,1)?(i=parseInt(i.substr(0,i.length-1)),i=0<=e.toLowerCase().indexOf("width")?Math.floor((n.width()-r)*i/100):Math.floor((n.height()-r)*i/100)):i=parseInt(i)||undefined,i},_size:function(n,r){var p=this;return"string"==typeof n?"clear"==n?this.each(function(){f(this).css({width:"",minWidth:"",maxWidth:"",height:"",minHeight:"",maxHeight:""})}):"unfit"==n?this.each(function(){i(this,f(this).parent(),!1)}):r==undefined?e(this[0],n):this.each(function(){e(this,n,r)}):this.each(function(){r=r||f(this).parent(),f.extend(n,i(this,r,n.fit)||{});var e=a(this,"width",r,n),t=a(this,"height",r,n);e||t?f(this).addClass("app-fluid"):f(this).removeClass("app-fluid")});function i(e,t,n){var r=f(e)[0],i=t[0],a=i.fcount||0;return n?(r.fitted||(r.fitted=!0,i.fcount=a+1,f(i).addClass("panel-noscroll"),"BODY"==i.tagName&&f("html").addClass("panel-fit")),{width:f(i).width()||1,height:f(i).height()||1}):(r.fitted&&(r.fitted=!1,i.fcount=a-1,0==i.fcount&&(f(i).removeClass("panel-noscroll"),"BODY"==i.tagName&&f("html").removeClass("panel-fit"))),!1)}function a(e,t,n,r){var i=f(e),a=t,o=a.substr(0,1).toUpperCase()+a.substr(1),s=p.parseValue("min"+o,r["min"+o],n),l=p.parseValue("max"+o,r["max"+o],n),u=p.parseValue(a,r[a],n),c=0<=String(r[a]||"").indexOf("%");if(isNaN(u))i._size(a,""),i._size("min"+o,s),i._size("max"+o,l);else{var d=Math.min(Math.max(u,s||0),l||99999);c||(r[a]=d),i._size("min"+o,""),i._size("max"+o,""),i._size(a,d)}return c||r.fit}function e(e,t,n){var r=f(e);if(n==undefined)return n=parseInt(e.style[t]),isNaN(n)?undefined:(f._boxModel&&(n+=i()),n);function i(){return 0<=t.toLowerCase().indexOf("width")?r.outerWidth()-r.width():r.outerHeight()-r.height()}""===n?r.css(t,""):(f._boxModel&&(n-=i())<0&&(n=0),r.css(t,n+"px"))}}}),f.extend(String.prototype,{isPositiveInteger:function(){return new RegExp(/^[1-9]\d*$/).test(this)},isInteger:function(){return new RegExp(/^\d+$/).test(this)},isNumber:function(e,t){return new RegExp(/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/).test(this)},trim:function(){return this.replace(/(^\s*)|(\s*$)|\r|\n/g,"")},trans:function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')},replaceAll:function(e,t){return this.replace(new RegExp(e,"gm"),t)},evalTm:function(n){return n?this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_{\\\\\\.}]*})","g"),function(e){var t=n[e.replace(/[{}]+/g,"")];return t||e}):this},evalTmById:function(e){var n=e||f(document);return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_{\\\\\\.}]*})","g"),function(e){var t=n.find("#"+e.replace(/[{}]+/g,""));return 0<t.size()?t.val():e})},evalTmByAttr:function(e){if(!e)return this.toString();var n=f(e);return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_{\\\\\\.}]*})","g"),function(e){var t=e.replace(/[{}]+/g,"");return("text"==t?n.text():("value"==t||"val"==t)&&n.val()||n.attr(t))||e})},evalTemplate:function(e){if(this.isFinishedTm())return this.toString();var t=f(e),n=t.attr("evalTarget")||e||document,r=f(n),i=this.evalTmById(r);return!(i=this.evalTmByAttr(t.attr("evalTarget")||e)).isFinishedTm()&&t.attr("eval-warn")?(a.messager.error(t.attr("eval-warn")),!1):i},isFinishedTm:function(){return!new RegExp("{[A-Za-z_]+[A-Za-z0-9_]*}").test(this)},skipChar:function(e){return this&&0!==this.length?this.charAt(0)===e?this.substring(1).skipChar(e):this:""},isValidPwd:function(){return new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/).test(this)},isValidMail:function(){return new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(this.trim())},isSpaces:function(){for(var e=0;e<this.length;e+=1){var t=this.charAt(e);if(" "!=t&&"\n"!=t&&"\t"!=t&&"\r"!=t)return!1}return!0},isPhone:function(){return new RegExp(/(^([0-9]{3,4}[-])?\d{3,8}(-\d{1,6})?$)|(^\([0-9]{3,4}\)\d{3,8}(\(\d{1,6}\))?$)|(^\d{3,8}$)/).test(this)},isUrl:function(){return new RegExp(/^[a-zA-z]+:\/\/([a-zA-Z0-9\-\.]+)([-\w .\/?%&=:]*)$/).test(this)},isExternalUrl:function(){return this.isUrl()&&-1==this.indexOf("://"+document.domain)},toInitials:function(){return e.toInitials(this)},toUpperInitials:function(){return e.toUpperInitials(this)},toPinyin:function(){return e.toPinyin(this)},toCapPinyin:function(){return e.toCapPinyin(this)}}),f}),define("bs-http-plugin/config-ext",["app/core/app-core"],function(e){return{"bs-client-config":{downloadUrl:e.getHostUrl()+"resources/bsnetfun/bosssoft-assistant-v1.5.4.exe",initUpdate:!0,updateUrl:e.getHostUrl()}}}),define("bs-http-plugin/config",["app/core/app-jquery","app/core/app-core","bs-http-plugin/config-ext"],function(e,t,n){var r={version:"1.0",url:"http://127.0.0.1:13526/",guardUrl:"http://127.0.0.1:13528/controlMainApp",heartbeat:"heart",update:"update",startUrl:"BosssoftAssistant://",cookies:window._cookies||"no-cookies",timeout:2e3,sliceSize:1024},i=n["bs-client-config"];return i&&$.extend(r,i),r}),define("bs-http-plugin/util/uuid",[],function(){return function a(o,s,l){function u(n,e){if(!s[n]){if(!o[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(c)return c(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[n]={exports:{}};o[n][0].call(i.exports,function(e){var t=o[n][1][e];return u(t||e)},i,i.exports,a,o,s,l)}return s[n].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,n){var r=e("./v1"),i=e("./v4"),a=i;a.v1=r,a.v4=i,t.exports=a},{"./v1":4,"./v4":5}],2:[function(e,t,n){for(var i=[],r=0;r<256;++r)i[r]=(r+256).toString(16).substr(1);t.exports=function(e,t){var n=t||0,r=i;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}},{}],3:[function(e,a,t){(function(e){var t,n=e.crypto||e.msCrypto;if(n&&n.getRandomValues){var r=new Uint8Array(16);t=function(){return n.getRandomValues(r),r}}if(!t){var i=new Array(16);t=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}a.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,n){var r=e("./lib/rng"),f=e("./lib/bytesToUuid"),i=r(),g=[1|i[0],i[1],i[2],i[3],i[4],i[5]],h=16383&(i[6]<<8|i[7]),m=0,v=0;t.exports=function(e,t,n){var r=t&&n||0,i=t||[],a=void 0!==(e=e||{}).clockseq?e.clockseq:h,o=void 0!==e.msecs?e.msecs:(new Date).getTime(),s=void 0!==e.nsecs?e.nsecs:v+1,l=o-m+(s-v)/1e4;if(l<0&&void 0===e.clockseq&&(a=a+1&16383),(l<0||m<o)&&void 0===e.nsecs&&(s=0),1e4<=s)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");m=o,h=a;var u=(1e4*(268435455&(o+=122192928e5))+(v=s))%4294967296;i[r++]=u>>>24&255,i[r++]=u>>>16&255,i[r++]=u>>>8&255,i[r++]=255&u;var c=o/4294967296*1e4&268435455;i[r++]=c>>>8&255,i[r++]=255&c,i[r++]=c>>>24&15|16,i[r++]=c>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var d=e.node||g,p=0;p<6;++p)i[r+p]=d[p];return t||f(i)}},{"./lib/bytesToUuid":2,"./lib/rng":3}],5:[function(e,t,n){var o=e("./lib/rng"),s=e("./lib/bytesToUuid");t.exports=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||o)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var a=0;a<16;++a)t[r+a]=i[a];return t||s(i)}},{"./lib/bytesToUuid":2,"./lib/rng":3}]},{},[1])(1)}),define("bs-http-plugin/data-transmit/message",["jquery"],function(i){var e=function(){var r=this;r.msgStack={},i(window).on("message",function(e){var t=e.originalEvent.data;t=i.parseJSON(t);var n=r.get(t.id);n&&n.call({},t)})};return e.prototype={constructor:e,set:function(e,t){this.msgStack[e]=t},get:function(e){var t=this.msgStack[e];return t&&delete this.msgStack[e],t}},new e}),define("base/dotpl-js",[],function(){var dotpl=function(){function _diving(e,t){var n=e.split("."),r=0;do{if(null==(t=t[n[r++]]))break}while(r<n.length&&"object"==typeof t);return t}function _applyMapTpl(e,a,o,s,l){return e.replace(/\${1}\{([^\}]+?)\}/gi,function(e,t){try{var n=_diving(t,a);if(n=null==n?"":n,"function"==typeof o){var r=o.call(this,t,n,a,s,l);return null==r?n:r}return n}catch(i){return alert(t||i.message||i),null}})}function _request(e,t,n){var r=null;(r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){if(4==r.readyState)try{t.call(this,r.responseText,r.status)}catch(e){return alert(e.message||e),null}};try{r.open("GET",e,!!n),r.send()}catch(i){return alert(i.message||i),null}return r}function _applyTpl(tpl,data,renderer,pk,parent){var regx=/<(tpl\d?)\s+(\w+)\s*=\s*(['|"]{1})([^\3]+?)\3\s*>([\s\S]+?)<\/\1>/gi;return regx.test(tpl)&&(tpl=tpl.replace(regx,function($0,$1,$2,$3,$4,$5){var output="";if(null!=$2)if("FOR"==$2.toUpperCase()){var arr=data;"."!=$4&&(arr=_diving($4,data));for(var i=0;null!=arr&&i<arr.length;i++){var item={};"object"!=typeof arr[i]?item.__val=arr[i]:item=arr[i],item.__offset=i,output+=_applyTpl($5,item,renderer,$4,arr)}}else if("IF"==$2.toUpperCase())try{if(eval(applyTpl($4,data)))return _applyTpl($5,data,renderer,pk,parent)}catch(e){alert($4||e.message||e)}return output})),_applyMapTpl(tpl,data,renderer,pk,parent)}return function(){return this.diving=_diving,this.applyTpl=_applyTpl,this.applyRTpl=function(n,r,i,a){_request(n,function(e,t){200==t?i.call(this,_applyTpl(e,r,a)):alert("Error "+t+":"+n)})},this}}()();return window.dotpl=dotpl,dotpl}),function(t){"use strict";var n,r=t.Base64;if("undefined"!=typeof module&&module.exports)try{n=require("buffer").Buffer}catch(w){}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(i),o=String.fromCharCode,s=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?o(192|t>>>6)+o(128|63&t):o(224|t>>>12&15)+o(128|t>>>6&63)+o(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return o(240|t>>>18&7)+o(128|t>>>12&63)+o(128|t>>>6&63)+o(128|63&t)},l=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,u=function(e){return e.replace(l,s)},c=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(1<e.length?e.charCodeAt(1):0)<<8|(2<e.length?e.charCodeAt(2):0);return[i.charAt(n>>>18),i.charAt(n>>>12&63),2<=t?"=":i.charAt(n>>>6&63),1<=t?"=":i.charAt(63&n)].join("")},d=t.btoa?function(e){return t.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,c)},p=n?function(e){return(e.constructor===n.constructor?e:new n(e)).toString("base64")}:function(e){return d(u(e))},f=function(e,t){return t?p(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):p(String(e))},g=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),h=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return o(55296+(t>>>10))+o(56320+(1023&t));case 3:return o((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return o((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},m=function(e){return e.replace(g,h)},v=function(e){var t=e.length,n=t%4,r=(0<t?a[e.charAt(0)]<<18:0)|(1<t?a[e.charAt(1)]<<12:0)|(2<t?a[e.charAt(2)]<<6:0)|(3<t?a[e.charAt(3)]:0),i=[o(r>>>16),o(r>>>8&255),o(255&r)];return i.length-=[0,0,2,1][n],i.join("")},b=t.atob?function(e){return t.atob(e)}:function(e){return e.replace(/[\s\S]{1,4}/g,v)},y=n?function(e){return(e.constructor===n.constructor?e:new n(e,"base64")).toString()}:function(e){return m(b(e))},e=function(e){return y(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))};if(t.Base64={VERSION:"2.1.9",atob:b,btoa:d,fromBase64:e,toBase64:f,utob:u,encode:f,encodeURI:function(e){return f(e,!0)},btou:m,decode:e,noConflict:function(){var e=t.Base64;return t.Base64=r,e}},"function"==typeof Object.defineProperty){var x=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};t.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",x(function(){return e(this)})),Object.defineProperty(String.prototype,"toBase64",x(function(e){return f(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",x(function(){return f(this,!0)}))}}t.Meteor&&(Base64=t.Base64),"undefined"!=typeof module&&module.exports&&(module.exports.Base64=t.Base64),"function"==typeof define&&define.amd&&define("base/base64",[],function(){return t.Base64})}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:this),define("bs-http-plugin/data-transmit/socket",["jquery","bs-http-plugin/util/uuid","bs-http-plugin/config","bs-http-plugin/data-transmit/message","base/dotpl-js","base/base64"],function(d,r,e,u){var p=e.sliceSize,f={pending:{code:0,name:"pending",msg:"准备阶段"},sendData:{code:1,name:"sendData",msg:"发送数据"},sendDataCompleted:{code:2,name:"sendDataCompleted",msg:"发送数据完成"},invoking:{code:3,name:"invoking",msg:"dll调用"},invoked:{code:4,name:"invoked",msg:"dll调用完成并返回结果"},state:function(e,t){return d.extend(!0,{},f[e],t)},register:function(e,t){"undefined"===d.type(e)&&(e={});var n=d(e),r=d.isFunction(t)?t:d.noop;return n.on("stateChange",r),n.trigger("stateChange",[f.state("pending")]),n},trigger:function(e,t,n){"undefined"===d.type(n)&&(n=[]),e.trigger("stateChange",[f.state(t)].concat([].slice.call(n,0)))}},c=function(){return this.ret.ret_msg},t=function(){};return t.prototype={constructor:t,get:function(t){var n=f.register({},t.stateChange);t.success=d.isFunction(t.success)?t.success:d.noop,t.error=d.isFunction(t.error)?t.error:d.noop;var e=t.data;e="undefined"===d.type(e)?{}:e,e=JSON.stringify(e),e=this.encodeURI(e);var r=t.sliceSize?t.sliceSize:p,i=d.extend(!0,{},t);if(delete i.data.payload,2e3<t.url.length+JSON.stringify(i.data).length+r)throw new Error("url 长度超过超过可发送最大长度，请重新设置sliceSize!");var a=this.sliceData(e,r),o=this.generateAjaxArray(t,a),s=o.dataSendCompletedAjaxConfig,l=o.ajaxConfig,u=o.deferreds;d(l).each(function(e,t){d.ajax(t).done(t.success).fail(t.error)}),f.trigger(n,"sendData");var c=d.Deferred();return d.when.apply(d,u).done(function(){c.resolve.apply(d,arguments),f.trigger(n,"sendDataCompleted"),s.success=function(e){f.trigger(n,"invoked",arguments),t.success.apply(t,arguments)},s.error=function(e){f.trigger(n,"invoked",arguments),t.error.apply(t,arguments)},f.trigger(n,"invoking")}).fail(function(){c.reject.apply(d,arguments),f.trigger(n,"invoked",arguments),t.error.apply(t,arguments)}),c},post:function(e){var t=f.register({},e.stateChange);e.success=d.isFunction(e.success)?e.success:d.noop,e.error=d.isFunction(e.error)?e.error:d.noop;var n=e.data;n="undefined"===d.type(n)?{}:n,e.data={id:r.v4().replace(/-/g,"")},n=JSON.stringify(n),n=this.base64Encode(n),e.crossDomain=!0,e.data.payload=n,e.contentType="application/x-www-form-urlencoded; charset=utf-8",e.dataType="json",e.type="POST",d.support.cors=!0,d.when(d.ajax(e)).done(function(){f.trigger(t,"invoked",arguments),e.success.apply(e,arguments)}).fail(function(){f.trigger(t,"invoked",arguments),e.error.apply(e,arguments)}),f.trigger(t,"invoking")},send:function(e){return e.data&&(e.data={id:r.v4().replace(/-/g,""),payload:JSON.stringify(e.data)},e.id=e.data.id),this.sendByIframe(e)},sendByIframe:function(r){var i=r["-operateDefer"];"undefined"===d.type(i)&&(i=d.Deferred(),r["-operateDefer"]=i);var t=i,e=f.register({},r.stateChange);r.success=d.isFunction(r.success)?r.success:d.noop,r.error=d.isFunction(r.error)?r.error:d.noop;var a=this.createIframe(r),o=this.createForm(r);u.set(r.data.id,function(e){"undefined"===d.type(e)&&(e={}),e.getResult=c;try{var t=[e.getResult(),f.state("invoked")];r.success.apply(this,t),"0"===e.ret.ret_code?(r.success.apply(r,t),i.resolve.apply(i,t)):(r.error.apply(r,t),i.reject.apply(i,t)),o.remove(),a.remove()}catch(n){if(t.push(n),r.error.apply(this,t),!window.console)throw n;window.console.error(n)}}),setTimeout(function(){o.submit()},0);var n=r.timeout?r.timeout:3e5,s=new Date,l=setInterval(function(){var e=new Date;"pending"===t.state()?n<e-s&&(r.error.apply(this,[{code:"timeout",msg:"超时"}]),t.reject({code:"timeout",msg:"超时"}),clearInterval(l)):clearInterval(l)},800);return f.trigger(e,"invoking"),t},createIframe:function(e){var t=d(dotpl.applyTpl('<iframe                                 id="socketIframe${id}"                                 name="socketIframe${id}"                                 style="position:absolute; top:-9999px; left:-9999px">                            </iframe>',e));return t.appendTo("body"),t},createForm:function(e){e.func?(e.invokeType="func",e.invokeValue=e.func):(e.invokeType="proc",e.invokeValue=e.proc);var t=d(dotpl.applyTpl('<form id="socketForm${id}" name="socketForm${id}"                 target="socketIframe${id}"                 action="${url}"                 method="post"                 accept-charset="UTF-8"                 >                 </form>',e));if("object"===d.type(e.data))for(field in e.data){var n=d('<input type="hidden" name="" value="" />');n.prop("name",field),n.prop("value",e.data[field]),t.append(n)}return t.appendTo("body"),t},sliceData:function(e,t){var n=[],r="";r="string"===d.type(e)?e:JSON.stringify(e);for(var i=Math.ceil(r.length/t),a=0,o=0;a<i;a++,o+=t)n.push(r.substr(o,t));return n},generateAjaxArray:function(e,t){var n=[],r=[],i={};d.extend(!0,i,e),delete i.data.payload;var a=t.length;0===a&&(a=1),i.data.sum=a;for(var o={url:e.url,timeout:i.timeout?i.timeout:5e3,contentType:"application/x-www-form-urlencoded; charset=utf-8",dataType:"jsonp",jsonp:"jsonp",type:"GET"},s=0;s<a;s++){var l={},u=d.Deferred();r.push(u.promise()),d.extend(!0,l,i.data),"undefined"!=typeof t[l.curr=s]&&(l.payload=t[s]);var c=d.extend(!0,{},o);c.success=function(t){return function(e){t.resolve()}}(u),c.error=function(t){return function(e){t.reject()}}(u),c.data=l,n.push(c)}return{dataSendCompletedAjaxConfig:d.extend(!0,{},o,i,{data:{res:1},timeout:0}),ajaxConfig:n,deferreds:r}},encodeURI:function(e){return encodeURIComponent(e)},base64Encode:function(e){return Base64.encode(e)}},new t}),define("app/util/app-number-format",[],function(){var o={format:function(e,t){if(e==undefined)return"";var n="";if(t.indexOf(";;#")==t.length-3){if(0==e)return"";t=t.substr(0,t.length-3)}var r=t.indexOf("%")==t.length-1;r&&(e*=100,t=t.substr(0,t.length-1));var i=e?e.toString().split("."):["0"],a=t?t.split("."):[""],o=function(e,t){for(var n="",r=e[0],i=t[0],a=r.length-1,o=!1,s=i.length-1;0<=s;s--)switch(i.substr(s,1)){case"#":0<=a&&(n=r.substr(a--,1)+n);break;case"0":n=0<=a?r.substr(a--,1)+n:"0"+n;break;case",":o=!0,n=","+n}if(0<=a)if(o)for(var l=r.length;0<=a;a--)n=r.substr(a,1)+n,0<a&&(l-a)%3==0&&(n=","+n);else n=r.substr(0,a+1)+n;return n.replace(/^,+/,"").replace(/^(-,)/,"-")}(i,a),s=function(e,t){for(var n=1<e.length?e[1]:"",r=1<t.length?t[1]:"",i=0,a="",o=0;o<r.length;o++)switch(r.substr(o,1)){case"#":i<n.length&&(a+=n.substr(i++,1));break;case"0":i<n.length?a+=n.substr(i++,1):a+="0"}return a}(i,a);n="";return n=s?o+"."+s:o,r&&(n+="%"),n},toThousands:function(e,t,n){var r="#,##0";if(0<t){for(var i="",a=0;a<t;a++)i+=n?"#":"0";r+="."+i}return o.format(e,r)},toChinese:function(e){if(isNaN(e))return"";if(e>Math.pow(10,12))return"还未处理这么大的值";for(var n="零壹贰叁肆伍陆柒捌玖",r=new Array("拾佰仟","分角"),t=new Array("万亿",""),i=e.toString().split("."),a=new Array(i[0].length-1,2),o=0;o<i.length;o++){for(var s="",l=0;4*l<i[o].length;l++){var u=i[o].length-4*(l+1),c=i[o].substring(u,u+4),d=(a=o?2:c.length-1,p(c,o));s=(d=d.replace(/(零.)+/g,"零").replace(/零+$/,""))+(d?t[o].charAt(l-1):"")+s}i[o]=s}return i[1]=i[1]?i[1]:"",i[0]=i[0]?i[0]+"元":i[0],i[1]=i[1].match(/分/)?i[1]:i[1]+"整",i[0]+i[1];function p(e,t){return e=e.replace(/\d/g,function(e){return n.charAt(e)+r[t].charAt(a--%4?a%4:-1)})}}};return o}),define("app/util/app-xss-utils",[],function(){var t=/&\w+;|&#(\d+);/g,r={"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" ","&quot;":'"'};String.prototype.xssDecode=function(e){return"string"!=typeof(e=e!=undefined?e:this.toString())?e:e.replace(t,function(e,t){var n=r[e];return n==undefined&&(n=isNaN(t)?e:String.fromCharCode(160==t?32:t)),n})}}),define("app/util/app-utils",["app/core/app-jquery","app/core/app-core","app/util/app-number-format","app/util/app-xss-utils"],function(c,n,r){var d="yyyy-MM-dd",i=function(e,t){var n=e.toString();if(n.length<t){for(var r=[t-n.length],i=0;i<r.length;i++)r[i]="0";n=r.join("")+n}else n.length>t&&(n=n.substring(n.length-t,n.length));return n};function a(e,t){return(e.textContent||e.innerText||c(e).text()||"").toLowerCase()===(t||"").toLowerCase()}return n.utils={htmlencode:function(e){var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML},collectOptions:function(e,t){if(!t||!jQuery.isArray(t))return null;$el=c(e);for(var n={},r=0;r<t.length;r++){var i,a=t[r];if(-1<a.indexOf(":")){var o=a.split(":");i=$el.attr(o[0]),a=o[1]}else i=$el.attr(a);i&&(i.isInteger()?n[a]=parseInt(i,10):n[a]=i)}return n},evalElementAttr:function(e,t){var n=c(e),r=t||"href",i=this.attr(n,r);return!i||i.isFinishedTm()?i:i=i.evalTemplate(e)},attr:function(e,t){return t?"text"==t?c(e).text():"html"==t?c(e).html():"val"==t||"value"==t?c(e).val():c(e).attr(t):null},format:function(e,t){t=t||[];for(var n=e,r=0;r<t.length;r++)n=n.replace(new RegExp("\\{"+r+"\\}","g"),t[r]);return n},getMonthRange:function(e){var t=e.getFullYear(),n=e.getMonth(),r=new Date(t,n+1,0).getDate();return{begin:new Date(t,n,1),end:new Date(t,n,r)}},getYearRange:function(e){return{begin:new Date(e,0,1),end:new Date(e,11,31)}},getSeasonRange:function(e){var t=e.getFullYear(),n=0,r=0;switch(function(e){var t=0;e<=3?t=1:e<=6?t=2:e<=9?t=3:e<=12&&(t=4);return t}(e.getMonth()+1)){case 1:n=1,r=3;break;case 2:n=4,r=6;break;case 3:n=7,r=9;break;case 4:n=10,r=12}var i=new Date(t,r,0).getDate();return{begin:new Date(t,n-1,1),end:new Date(t,r-1,i)}},formatNumber:function(e,t){return t!=undefined&&"number"==typeof t||(t=2),r.toThousands(e,t)},formatNumberSpc:function(e,t){return r.toThousands(e,t,!0)},formatChinese:function(e){return r.toChinese(e)},parseDate:function(e,t){if(e){t||(t=d);var n=[],r=[],i=t.replace(/[y|M|d|H|m|s]+/g,function(e){return n.push(e),"(\\d+)"}),a=new RegExp(i,"g");if(!a.test(e))return alert("解析日期时间出错"),null;e.replace(a,function(){r=c.makeArray(arguments).slice(1,n.length+1)});for(var o=new Date,s=0;s<n.length;s++){var l=n[s],u=parseInt(r[s],10);switch(l.charAt(0)){case"y":o.setFullYear(u);break;case"M":o.setMonth(u-1);break;case"d":o.setDate(u);break;case"H":o.setHours(u);break;case"m":o.setMinutes(u);break;case"s":o.setSeconds(u);break;case"S":o.setMilliseconds(u)}}return o}},formatDate:function(r,e){if(r)return e||(e=d),e.replace(/[y|M|d|H|m|s]+/g,function(e){var t="",n=e.length;switch(e.charAt(0)){case"y":t=r.getFullYear();break;case"M":t=r.getMonth()+1;break;case"d":t=r.getDate();break;case"H":t=r.getHours();break;case"m":t=r.getMinutes();break;case"s":t=r.getSeconds();break;case"S":t=r.getMilliseconds()}return i(t,n)})},isIDCard:function(e){return/^((1[1-5])|(2[1-3])|(3[1-7])|(4[1-6])|(5[0-4])|(6[1-5])|71|(8[12])|91)\d{4}((19\d{2}(0[13-9]|1[012])(0[1-9]|[12]\d|30))|(19\d{2}(0[13578]|1[02])31)|(19\d{2}02(0[1-9]|1\d|2[0-8]))|(19([13579][26]|[2468][048]|0[48])0229))\d{3}(\d|X|x)?$/.test(e)},isPlusInteger:function(e){return/^(0|[1-9][0-9]*)$/.test(e)&&e.length<11},isPhone:function(e){return/^(\d{3,4}-?)?[1-9]\d{6,7}([-|转]\d{2,4})?$/.test(e)},isMobile:function(e){return new RegExp(/^((\(\d{3}\))|(\d{3}\-))?1[358]\d{9}$/).test(e)},isMail:function(e){return new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(e)},isURL:function(e){return new RegExp(/^http:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/).test(e)},isZipCode:function(e){return new RegExp(/^[1-9]\d{5}$/).test(e)},isDigits:function(e){return new RegExp(/^[0-9]*$/).test(e)&&e.length<=32},sort:function(e,r){var t=e.length;if(t<=1)return e;var i=Math.floor(t/2),a=e[i],o=[],s=[];return c(e).each(function(e,t){var n=r(a,t);1<=n?o.push(t):n<0?s.push(t):0==n&&i<e?s.push(t):0==n&&e<i&&o.push(t)}),n.utils.sort(o,r).concat(a,n.utils.sort(s,r))}},c.expr[":"].innerTextExactMatch=c.expr.createPseudo?c.expr.createPseudo(function(t){return function(e){return a(e,t)}}):function(e,t,n){return a(e,n[3])},String.prototype.gblen=function(){for(var e=0,t=0;t<this.length;t++)127<this.charCodeAt(t)||94==this.charCodeAt(t)?e+=2:e++;return e},n.NumberFormat=r,n.utils.addTreeBtn=function(t,n){var e=t.tId,r=e+"_"+n.id;if(!(0<c("#"+r).length)){var i=c('<span class="button '+n.icon+'" id="'+r+'" title="'+n.title+'"></span>');i.on("click",function(e){n.handler(t),e.stopPropagation()}),c("#"+e+"_span").after(i)}},n.utils}),define("app/widgets/app-frags",["app/core/app-core"],function(e){return e.frags={dialogFrag:'<div class="dialog" id="${dialogId}" ><div class="dialog-header" onselectstart="return false;" oncopy="return false;" onpaste="return false;" oncut="return false;"><div class="closebg"><a class="close">×</a></div><h5>${title}</h5></div></div>',dialogNoHeaderFrag:'<div class="dialog" id="${dialogId}" style="visibility:hidden;"></div>',dialogProxy:'<div id="dialogProxy" class="dialog dialogProxy"></div>',globalBodyFrag:'\x3c!--遮盖屏幕--\x3e<div id="_alertBackground" class="alertBackground"></div><div id="_dialogMask" class="dialog-mask"></div>',alertBoxFrag:'<div id="_alertMsgBox" class="alert"><div class="alertContent"><i class="${icon}"></i><span><a href="javascript:void(0)" onclick="$A.messager.toggleDetail();">${message}</a></span><tpl if="\'${detail}\'!=\'\'"><div id="__alertDetails" class="alertDetail" style="display:none;">${detail}</div></tpl></div><div class="alertFooter"><div class="btn-toolbar">${butFragment}</div></div></div>',alertBoxFrag_NoDetail:'<div id="_alertMsgBox" class="alert"><div class="alertContent"><i class="${icon}"></i><span>${message}</span><tpl if="\'${detail}\'!=\'\'"><div id="__alertDetails" class="alertDetail" style="display:none;">${detail}</div></tpl></div><div class="alertFooter"><div class="btn-toolbar">${butFragment}</div></div></div>',tipsBoxFrag:'<div id="_tipsMsgBox" class="tips"><div class="tipsContent"><i class="${icon}"></i><span><a href="javascript:void(0)">${message}</a></span></div></div>',alertButFrag:'<a class="btn #css#" rel="#callback#" onclick="$A.messager.close()" href="javascript:">#butMsg#</a>',navTabCM:'<ul id="navTabCM"><li rel="reload">刷新标签页</li><li rel="closeCurrent">关闭标签页</li><li rel="closeOther">关闭其它标签页</li><li rel="closeAll">关闭全部标签页</li></ul>',dialogCM:'<ul id="dialogCM"><li rel="closeCurrent">关闭弹出窗口</li><li rel="closeOther">关闭其它弹出窗口</li><li rel="closeAll">关闭全部弹出窗口</li></ul>',externalFrag:'iframe src="{url}" style="width:100%;height:{height};" frameborder="no" border="0" marginwidth="0" marginheight="0"></iframe>',statusCode_503:"服务器当前负载过大或者正在维护!",validateFormError:"提交数据不完整，{0}个字段有错误，请改正后再提交!",sessionTimout:"会话超时，请重新登录!",alertSelectMsg:"请选择信息!",forwardConfirmMsg:"继续下一步!",mainTabTitle:"我的主页"},e.frags}),define("app/widgets/window/app-messager",["app/core/app-jquery","app/core/app-core","app/widgets/app-frags",localeFile],function(h,m,v,e){var s=e.messager,b=null;return b={_boxId:"#_alertMsgBox",_tipsId:"#_tipsMsgBox",_bgId:"#_alertBackground",_closeTimer:null,_types:{error:"error",info:"info",warn:"warn",correct:"correct",confirm:"confirm"},_getTitle:function(e){return s[e.toUpperCase()]},_keydownOk:function(e){e.keyCode==m.keyCode.ENTER&&e.data.target.trigger("click")},_keydownEsc:function(e){e.keyCode!=m.keyCode.ESC&&e.keyCode!=m.keyCode.ENTER||e.data.target.trigger("click")},toggleDetail:function(){h("#__alertDetails").toggle(),this.relayout()},relayout:function(){var e=h(this._boxId),t=e.attr("pos");"top"==t?e.css({left:(h(window).width()-e.width())/2+"px",top:"0px"}):"bottom"==t?e.css({bottom:"0px",right:"0px"}):e.css({left:(h(window).width()-e.width())/2+"px",top:(h(window).height()-e.height())/2+"px"})},_open:function(e,t,n,r){h(this._boxId).remove();var i,a="";if(n)for(var o=0;o<n.length;o++){var s=n[o].call?"callback":"",l=n[o].css?n[o].css:"";a+=v.alertButFrag.replace("#butMsg#",n[o].name).replace("#callback#",s).replace("#css#",l)}var u=(i=null==(i="string"==typeof t?m.jsonEval(t):t).message&&null==i.detail?{type:e,icon:e,title:this._getTitle(e),message:t,butFragment:a}:h.extend({type:e,icon:e,title:this._getTitle(e),butFragment:a},i)).detail?v.alertBoxFrag:v.alertBoxFrag_NoDetail,c=$template(u,i);h(c).appendTo("body");var d=h(this._boxId);d.attr("pos",r),this.relayout(),this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null),this._types.info==e||this._types.correct==e?this._closeTimer=setTimeout(function(){b.close()},3500):h(this._bgId).show();var p=h(this._boxId).find("a.btn"),f=p.filter("[rel=callback]"),g=h(document);for(o=0;o<n.length;o++)n[o].call&&f.eq(o).click(n[o].call),n[o].keyCode==m.keyCode.ENTER&&g.bind("keydown",{target:p.eq(o)},this._keydownOk),n[o].keyCode==m.keyCode.ESC&&g.bind("keydown",{target:p.eq(o)},this._keydownEsc);return d},close:function(e){h(document).unbind("keydown",this._keydownOk).unbind("keydown",this._keydownEsc),$msgBox=h(this._boxId),e?$msgBox.fadeOut(e,function(){$msgBox.remove()}):($msgBox.hide(),setTimeout(function(){$msgBox.remove()},500),h(this._bgId).hide())},error:function(e,t){this._alert(this._types.error,e,t)},info:function(e,t){this._alert(this._types.info,e,t,"bottom")},warn:function(e,t){this._alert(this._types.warn,e,t)},correct:function(e,t){this._tips(this._types.correct,e,t,"center")},_alert:function(e,t,n,r){var i={okName:s.OK,okCall:null,okCss:"btn-primary singlebtn"};h.extend(i,n);var a=[{name:i.okName,call:i.okCall,keyCode:m.keyCode.ENTER,css:i.okCss}],o=this._open(e,t,a,r);h("a",o).focus()},_tips:function(e,t,n,r){h(this._tipsId).remove();var i={icon:e,message:t},a=(n=n||{}).displayTime||1500,o=n.fadeSpeed||800,s=v.tipsBoxFrag,l=$template(s,i);h(l).appendTo("body");var u=h(this._tipsId);u.show(),u.attr("pos",r),"top"==(r=u.attr("pos"))?u.css({left:(h(window).width()-u.width())/2+"px",top:"0px"}):"bottom"==r?u.css({bottom:"0px",right:"0px"}):u.css({left:(h(window).width()-u.width())/2+"px",top:"45px"}),u.show(),setTimeout(function(){u.animate({top:"-=38",opacity:0},o,function(){u.remove()})},a)},confirm:function(e,t){var n={okName:s.OK,okCall:null,okCss:"btn-primary",cancelName:s.CANCEL,cancelCall:null,button:null};h.extend(n,t);var r=[{name:n.okName,call:n.okCall,css:n.button&&n.button==this.BUTTONS.OK?n.okCss:""},{name:n.cancelName,call:n.cancelCall,keyCode:m.keyCode.ESC,css:n.button&&n.button!=this.BUTTONS.CANCEL?"":n.okCss}];this._open(this._types.confirm,e,r)},BUTTONS:{OK:"OK",CANCEL:"CANCEL"}},m.messager=b,m.messager}),define("app/core/app-options",["app/core/app-core",localeFile],function(e,t){return e.options={appDefaults:{xquery:{className:"xquery"},XqueryBox:{className:"app-xquerybox"},Textbox:{value:"",text:"",maxLength:null,readonly:!1,disabled:!1,width:"",style:"",wrapstyle:"",multiline:!1,clearbtn:!1,tips:"",filter:null,forbidWord:null,permitWord:null,trim:!0,className:"app-textbox"},Combo:{valuefield:"id",textfield:"name",parameter:null,autoHideOpenBtn:!1,fadeout:!1,panelwidth:"",panelheight:265,customPanelHeight:0,customPanelPosition:"bottom",openbtn:!0,formatter:null,keyShowPanel:[{keyCode:e.keyCode.DOWN,ctrlKey:!0},{keyCode:e.keyCode.UP,ctrlKey:!0}],keyHidePanel:[e.keyCode.ESC,e.keyCode.TAB],keyNextNode:[e.keyCode.DOWN],keyPrevNode:[e.keyCode.UP],keyPickNode:[e.keyCode.ENTER],className:"app-combo"},Combobox:{url:"",multiple:!1,data:null,panelheight:242,keyNextNode:[e.keyCode.DOWN,e.keyCode.RIGHT],keyPrevNode:[e.keyCode.UP,e.keyCode.LEFT],usesuggest:!1,nodeDelete:!1,clearable:!0,className:"app-combobox"},Comboztree:{url:"",asyncUrl:"",onlyleaf:!1,checkBySelf:!1,async:!0,showIcon:!1,multiple:!1,idfield:null,pidfield:"pId",rootpidvalue:"",autoparam:null,otherParam:null,usesuggest:!1,panelheight:232,shrinkValue:!0,ignoreHalfCheck:!0,lazy:300,keyChildNode:[e.keyCode.RIGHT],keyParentNode:[e.keyCode.LEFT],className:"app-comboztree"},Reference:{valuefield:"id",textfield:"name",title:"对话框",hasheader:!0,digWidth:null,digHeight:null,clearbtn:!0,openbtn:!0,url:null,className:"app-reference"},Suggest:{panelheight:242,slt_area:30,suggest:"",suggestfield:"",remote:!1,lazy:500,multiple:!1,acceptText:!1,suggestClear:!1,keyNextSltNode:[e.keyCode.RIGHT],keyPrevSltNode:[e.keyCode.LEFT],className:"app-suggest"},Typeahead:{suggest:"",remote:!1,lazy:500,keyNextNode:[e.keyCode.DOWN,e.keyCode.RIGHT],keyPrevNode:[e.keyCode.UP,e.keyCode.LEFT],className:"app-typeahead"},Money:{precision:2,formatter:"thousand",filter:"number",prefix:"¥",className:"app-money"},Number:{min:null,max:null,varlen:!1,precision:0,prefix:"",suffix:"",filter:"number",formatter:null,zeroIsNull:!1,className:"app-number"},DateTime:{openbtn:!0,onlySelect:!1,type:"date",format:"yyyy-mm-dd",valueFormat:null,language:t.locale,weekStart:1,autoclose:!0,todayBtn:!0,todayHighlight:!0,startView:2,minView:2,className:"app-datetime"},Grid:{url:"",title:"",headRowHeight:28,striped:!0,toolbarHeight:33,toolbar:null,idField:"id",hiddenColumnInit:!1,width:null,height:null,follow:"all",halign:!1,checkbox:!1,radiobox:!1,multiSort:!1,remoteSort:!1,rownumbers:"none",view:{type:"GridView",region:"right",isDefault:!1},switchView:!1,footerRowNumber:!1,pager:"none",pagerToolbarIcon:{download:!1,print:!1},pageNumber:1,pageSize:10,pageList:[10,15,20,50,100,200],columns:null,frozenColumns:null,frozenColumnsRight:null,markChange:!1,editable:!0,jsonReader:{total:"totalRecords",rows:"data",footer:"footer"},queryParams:null,headerCustom:null,autoLoad:!0,fitColumns:"E",summary:null,summaryPos:"bottom",columnResizable:!0,autoBeginEdit:!0,autoEndEdit:!0,editorDelBtn:!0,mergeColumns:null,columnManager:!0,dblOnce:1e3,keyUpEditor:[e.keyCode.UP],keyDownEditor:[e.keyCode.DOWN],keyLeftEditor:[e.keyCode.LEFT],keyRightEditor:[e.keyCode.RIGHT],keySpecEnabled:!0,keyNextEditor:[e.keyCode.ENTER,e.keyCode.TAB],keyPrevEditor:[{keyCode:e.keyCode.TAB,shiftKey:!0}],keyAppendRow:[{keyCode:e.keyCode.PLUS,shiftKey:!0}],keyDeleteRow:[{keyCode:e.keyCode.MINUS,shiftKey:!0,ctrlKey:!0}]},Column:{field:null,title:null,formula:null,colspan:null,rowspan:null,width:100,printWidth:null,printType:"String",frozen:null,hidden:!1,align:"center",sortable:!1,sorter:null,styler:null,formatter:null,editor:null,buttons:null,showTitle:!1,summary:null,resizable:!0,rowHeader:!1,showTree:!0,lockTree:!1},Combogrid:{url:"",panelheight:297,multiple:!1,suggestfield:"",search:!1,lazy:500,usesuggest:!1,keyNextPage:[e.keyCode.RIGHT],keyPrevPage:[e.keyCode.LEFT],className:"app-combogrid",Grid:{pagerToolbar:!1,rownumbers:"repeat",follow:null,clickDelay:0}},Checkbox:{valuefield:"id",textfield:"name",checkedLen:0,orient:"horizontal"},progressbar:{width:"auto",value:0,height:"20px","background-color":"#4AAE98",color:"black",striped:!0,max:100},upload:{uploadUrl:"attachment/upload.do",requestFile:!1,fileUrl:"attachment/getFiles.do",deleteUrl:"attachment/delete.do",toolbarPosition:"top",style:"",css:"",fileWidth:"",canDelete:!1,exts:"",uploadBtnText:"上传文件",multiple:!0},Button:{id:null,disabled:!1,toggle:!1,selected:!1,group:null,plain:!1,text:"",iconCls:null,iconAlign:"left",size:"small",onClick:function(){}},MenuButton:{className:"app-menubutton",disabled:!1,plain:!0,menu:null,duration:100},Menu:{className:"app-menu",zIndex:11e4,left:0,top:0,alignTo:null,align:"left",minWidth:120,duration:100,hideOnUnhover:!0,onShow:function(){},onHide:function(){},onClick:function(e){}},Panel:{id:null,paddings:"0 0 0 0",margins:"0 0 0 0",title:null,width:"auto",height:"auto",left:null,top:null,cls:null,headerCls:null,bodyCls:null,style:{},href:null,cache:!0,fit:!1,border:!0,doSize:!0,noheader:!1,content:null,collapsible:!1,minimizable:!1,maximizable:!1,closable:!1,collapsed:!1,minimized:!1,maximized:!1,closed:!1,extractor:null,method:"get",queryParams:{},loader:function(){},tools:[],loadingMessage:"Loading...",onLoad:function(){},onBeforeOpen:function(){},onOpen:function(){},onBeforeClose:function(){},onClose:function(){},onBeforeDestroy:function(){},onDestroy:function(){},onResize:function(e,t){},onMove:function(e,t){},onMaximize:function(){},onRestore:function(){},onMinimize:function(){},onBeforeCollapse:function(){},onBeforeExpand:function(){},onCollapse:function(){},onExpand:function(){}}},zindexs:{droppanel:2e3,dialog:1001,dialogMask:1e3,dialogBack:999},dataTable:{iDisplayLength:20,aLengthMenu:[[20,50,100],[20,50,100]],bServerSide:!0,bProcessing:!1,bDeferRender:!1,sAjaxDataProp:"data",pageListLength:10},pagination:{pageSize:20,listLength:10,pageSizeMenu:[20,50,100]},flexigrid:{rpOptions:[20,50,100]},jqgrid:{pageList:[20,50,100]},simpletree:{selected:"selected",exp:"center_expandable",coll:"center_collapsable",firstExp:"first_expandable",firstColl:"first_collapsable",lastExp:"last_expandable",lastColl:"last_collapsable",expandIcon:"icon-folder-close",folderIcon:"icon-folder-open",oneExp:"one_expandable",oneColl:"one_collapsable",leafIcon:"icon-file",ck:"checked",unck:"unchecked"},getPlugins:function(){var e=[];for(var t in this.appDefaults)e.push({pluginName:t.toLowerCase(),className:this.appDefaults[t].className});return e}},e.options}),define("app/data/app-json-result",["jquery"],function(a){var o=function(e,t){var n=null,r=null;n="string"===a.type(e)?a.parseJSON(e):a.isPlainObject(e)&&e.responseText?a.parseJSON(e.responseText):e,r=t?{code:o.SUCCESS,message:null}:{code:n.statusCode,message:n.message},this.code=parseInt(r.code,10),this.message=r.message,this.translator=n.translator,this.translateBodys=n.translateBodys,this.data=null;var i=t?n:n.data;a.isPlainObject(i)?(this.data={},a.extend(this.data,i)):this.data=i};return o.prototype={getCode:function(){return this.code},getMessage:function(){return this.message},getRawData:function(e){var t=this.data;if(a.isPlainObject(t)&&""!=e&&null!=e&&e!=undefined)for(var n=e.split("."),r=n.length,i=0;i<r&&(null!==(t=t[n[i]])&&t!==undefined);i++);return t},getData:function(e){var t=this.getRawData(e);return a.isPlainObject(t)&&t.totalPage&&(t.translator=this.translator,t.dicts=this.translateBodys),t}},o.SUCCESS=200,o.FAILURE=-1,o.WARN=1,o.UN_AUTHED=-999,o}),define("app/data/app-ajax",["app/core/app-jquery","app/core/app-core","app/util/app-utils","app/widgets/window/app-messager","app/core/app-options","app/data/app-json-result"],function($,$A,$utils,$messager,$options,JsonResult){var _ajaxProgressBar=$("#_ajaxProgressBar");function _callback(e,t,n){if(null!=e&&("string"==typeof e&&(e=e.split(",")),$.isArray(e)))for(var r=0;r<e.length;r++)$.isFunction($A.ajax.callbackFunctions[e[r]])&&$A.ajax.callbackFunctions[e[r]](t,n)}function _breforeCall(e){var t=e.toggle,n=e.beforeCall||(t?t.attr("ajax-before"):null);if(!n)return!0;n=n.split(",");for(var r=e._beforeCallIndex||0;r<n.length;r++){var i=$A.ajax.beforeCallFunctions[n[r]];if(e._beforeCallIndex=r+1,$.isFunction(i)&&!i(e))return!1}return!0}0==_ajaxProgressBar.length&&($("body").prepend('<div id="_ajaxProgressBar" class="ajaxProgressBar" style="display:none;">\x3c!--<div class="ajaxProgressBarText">数据处理中..</div>--\x3e</div>'),_ajaxProgressBar=$("#_ajaxProgressBar")),$(document).ajaxStart(function(){_ajaxProgressBar.show()}).ajaxStop(function(){_ajaxProgressBar.hide()}).ajaxError(function(){_ajaxProgressBar.hide()}),$A.loadLogin=function(){window.location.reload()};var that={callbackFunctions:{refreshTable:function(e,t){var n=t.toggle;n&&n.attr("refreshTable")?$A(n.attr("refreshTable")).bsgrid("reload"):t.refreshTable?$A(t.refreshTable).bsgrid("reload"):$A(".jqgrid").bsgrid("reload")},refreshMainDetail:function(e,r){var t=e.params;t&&$(t).each(function(e,t){var n=$A(e);if(0!=n.length)if(n.isForm())n.refreshFormData(t);else if(n.isGrid()){if(!t)return;"all"==r.submitMode?n.bsgrid("refreshAllData",t):n.bsgrid("refreshEditData",t)}})},refreshAjaxPage:function(e,t){var n=t.toggle,r=e.refreshBox||t.refreshBox||n.attr("refreshBox")||n.attr("data-target"),i=$(r),a=e.url||t.refreshUrl||n.attr("refreshUrl")||i.attr("url");a&&0<i.length&&i.htmlAJAX({url:a})},refreshPage:function(e,t){window.location.reload()},reloadDataLoader:function(e,t){var n=t.toggle,r=e.dataloader||t.dataloader||(n?n.attr("dataloader"):null);$(r).dataloader("load")},forwardUrl:function(e,t){var n=t.toggle,r=e.forwardUrl||t.forwardUrl||(n?n.attr("forwardUrl"):null);window.location.href!=r&&(window.location=r)},closeSelf:function(e,t){var n=$A.getCurrentDialog();n&&0<n.length?$A.dialog.close(n):$A.navTab.closeCurrentTab()},switchTab:function(e,t){var n=e.tabId||t.tabId;$("#"+n,$A.getContainer()).tab("show")},callMethod:function(e,t){var n=t.toggle,r=e.method||t.callMethod||(n?n.attr("callMethod"):null);r&&(r=decodeURIComponent(r),setTimeout(new Function(methodName),100))}},beforeCallFunctions:{collectData:function(e){var t=e.toggle,n=e.collectFinder||(t?t.attr("collectFinder"):null),r=e.collectAttr||(t?t.attr("collectAttr"):"value"),i=e.collectParam||(t?t.attr("collectParam"):"checkId"),a=e.collectBox||(t?t.attr("collectBox"):document),o=$(a);if(!n)return!0;var s=[];if($(n,o).each(function(){s.push($(this).attr(r))}),0<s.length){1==s.length&&(s=s[0]);var l=e.data;l||(l=e.data={}),l[i]=s}return!0},confirmPrompt:function(t){var e=t.toggle,n=t.confirm||(e?e.attr("confirm"):null);if(n){if(!(n=n.evalTemplate(e)))return;return $messager.confirm(n,{okCall:function(e){return e&&$A.ajax.ajaxCall(t)}}),!1}return!0}},successCall:function(e,t){},respToResult:function(e){var t=null;if("string"===$.type(e))try{t=$.parseJSON(e)}catch(n){t=e}else if($.isPlainObject(e)&&e.responseText)try{t=$.parseJSON(e.responseText)}catch(n){try{t=$A.jsonEval(e.responseText)}catch(n){t=e.responseText}}else t=e;return t&&t.type&&"__bosssoft"==t.type?new JsonResult(t):t},ajaxCall:function(config){var _self=this,options=$.extend({type:"POST",dataType:"json",cache:!1,failure:function(e,t){$messager.error(t.getMessage())}},config);if(options.success||options.failure){var processSuccess=options.success||options.callback,processFailure=options.failure;processSuccess=$.isFunction(processSuccess)?processSuccess:$.noop,processFailure=$.isFunction(processFailure)?processFailure:$.noop,options.success=function(e,t){try{var n=_self.respToResult(e);_self.ajaxSuccess(n,t),n instanceof JsonResult?(code=n.getCode(),message=n.getMessage(),code===JsonResult.SUCCESS?processSuccess(n.getData(),n,t):processFailure(n.getData(),n,t)):processSuccess(n,t)}catch(r){window.console?window.console.log(r):$messager.error("系统繁忙！请稍后重试..."),ajaxDebugInfo(options,e,t)}}}if(options.error){var processError=options.error;options.error=function(e,t,n,r){var i=_self.respToResult(e);processError(i,e,t,n,r)}}else options.error=that.ajaxError;if(_breforeCall(options)){options.data&&"object"==$.type(options)&&(options.contentType&&-1<options.contentType.indexOf("application/json")?options.data=JSON.stringify(options.data):options.data=$.param(options.data,!0));var result=$.ajax(options);if(0==options.async)try{result=eval(result),"object"===$.type(result)&&result.statusCode&&$A.ajax.ajaxSuccess(result)}catch(e){}return result}},ajaxError:function(e,t,n,r){if("401"==e.status);else if("405"==e.status);else if("404"==e.status)$messager.error("找不到对应的URL地址");else{var i=that.respToResult(e);if(i instanceof JsonResult)$messager.error(i.getMessage());else{var a=i.message||"网络异常,请求出错!";$messager.error(a)}}this.errorHandle&&$.isFunction(this.errorHandle)&&this.errorHandle()},ajaxSuccess:function(e){e.statusCode==$A.statusCode.error||e.statusCode==$A.statusCode.internalError||e.statusCode==$A.statusCode.notFound?e.message&&$messager.error(e.message):e.statusCode==$A.statusCode.timeout?$messager.error(e.message,{okCall:$A.loadLogin}):e.message&&$messager.correct(e.message)}};return $A.ajax=that,$.fn.extend({loadUrl:function(e,t,n){$(this).htmlAJAX({url:e,data:t,callback:n})},loadAppURL:function(s){var l=$(this);$.fn.xheditor&&$("textarea.editor",l).xheditor(!1);var u={type:"POST",cache:!1,async:!0,init:!0,history:!1,title:window.title,complete:function(e,t,n,r){"404"==e.status&&$messager.error("找不到对应的URL地址")},success:function(e,t,n){var r;if(u.history){var i=this.title,a=this.url;History.pushState({title:i,url:a},i,a)}var o=$A.jsonEval(e);if(o.statusCode==$A.statusCode.timeout)o.message?$messager.error(o.message,{okCall:$A.loadLogin}):$A.loadLogin();else if(o.statusCode==$A.statusCode.error||o.statusCode==$A.statusCode.internalError||o.statusCode==$A.statusCode.notFound)o.message&&$messager.error(o),s.error&&$.isFunction(s.error)&&s.error.call(this,arguments);else{switch(l.css("visibility","hidden"),this.operator){case"append":l.append(e);break;case"prepend":l.prepend(e);break;case"before":l.before(e);break;case"after":l.after(e);break;case"replace":l=l.replaceWith(e);break;default:u.loading?(r=$('<div class="loadingPage-mask"></div>'),l.html(e),r.height(l.innerHeight()),r.width(l.innerWidth()),l.prepend(r)):l.html(e)}$.isFunction(this.beforePageInit)&&($A.resolveUiPageModel(l),this.beforePageInit(l,model)),this.onPageLoad?l.one($A.eventType.pageLoad,{pageLoadFunc:this.onPageLoad,uiPageModel:l.data("uiPageModel")},function(e){e.data.pageLoadFunc(l.data("uiPageModel")),r&&r.remove(),l.css("visibility","")}):l.one($A.eventType.pageLoad,function(){r&&r.remove(),l.css("visibility","")}),!1!==s.init&&l.initPageUI(),$.isFunction(this.callback)&&this.callback(e,l.data("uiPageModel"))}l.fadeIn()},error:function(e,t,n){s.error&&$.isFunction(s.error)&&s.error.call(this,arguments),"401"==e.status||"405"==e.status||(this.success(e.responseText),l.fadeIn())}};u=$.extend(u,$options.ajax,s),$.browser.webkit||u.url&&(u.url=encodeURI(u.url)),$.ajax(u)},appendAJAX:function(e){e.operator="append",$(this).loadAppURL(e)},prependAJAX:function(e){e.operator="prepend",$(this).loadAppURL(e)},breforeAJAX:function(e){e.operator="before",$(this).loadAppURL(e)},afterAJAX:function(e){e.operator="after",$(this).loadAppURL(e)},replaceAJAX:function(e){e.operator="replace",$(this).loadAppURL(e)},htmlAJAX:function(e){e.operator=null,$(this).loadAppURL(e)}}),$("body").on("click.data-api","[ajax-toggle='ajax']",function(e){e.preventDefault();var t=$(this),n=$utils.evalElementAttr(t);if(!n)return!1;that.ajaxCall({url:n,toggle:t})}),that;function ajaxDebugInfo(e,t,n){if(window.debugModel){var r=["请求地址："+e.url];r.push("请求处理状态："+n),r.push("请求处理结果："+t),alert(r.join("。"))}}}),define("app/widgets/drag/app-drag",["app/core/app-jquery","app/core/app-core"],function(o,s){return o.fn.drager=function(n){return"string"==typeof n&&"destroy"==n?this.each(function(){o(this).unbind("mousedown",s.dragTool.start),o.data(this,"app/widgets/drag/app-dragdata",null)}):this.each(function(){var e=o(this);if(o.data(s.dragTool,"app/widgets/drag/app-dragdata",{options:o.extend({el:e,obj:e},n)}),n.event)s.dragTool.start(n.event);else{var t=n.selector;o(t,obj).bind("mousedown",s.dragTool.start)}})},s.dragTool={start:function(e){document.onselectstart=function(e){return!1};var t=o.data(this,"app/widgets/drag/app-dragdata"),n=t.options.el[0];o.data(n,"app/widgets/drag/app-dragdata",{options:t.options}),s.dragTool.current||(s.dragTool.current={el:n,oleft:parseInt(n.style.left)||0,otop:parseInt(n.style.top)||0,ox:e.pageX||e.screenX,oy:e.pageY||e.screenY},o(document).bind("mouseup",s.dragTool.stop).bind("mousemove",s.dragTool.drag))},drag:function(e){if(!e)e=window.event;var t=s.dragTool.current,n=o.data(t.el,"app/widgets/drag/app-dragdata"),r=t.oleft+(e.pageX||e.clientX)-t.ox,i=t.otop+(e.pageY||e.clientY)-t.oy;if(i<1&&(i=0),"horizontal"==n.options.move)n.options.minW&&r>=o(n.options.obj).cssNum("left")+n.options.minW&&n.options.maxW&&r<=o(n.options.obj).cssNum("left")+n.options.maxW?t.el.style.left=r+"px":n.options.scop&&(n.options.relObj?r-parseInt(n.options.relObj.style.left)>n.options.cellMinW&&(t.el.style.left=r+"px"):t.el.style.left=r+"px");else if("vertical"==n.options.move)t.el.style.top=i+"px";else{var a=n.options.selector?o(n.options.selector,n.options.obj):o(n.options.obj);r>=2*-a.outerWidth()/3&&0<=i&&r+a.outerWidth()/3<o(window).width()&&i+a.outerHeight()<o(window).height()&&(t.el.style.left=r+"px",t.el.style.top=i+"px")}return n.options.drag&&n.options.drag.apply(t.el,[t.el]),s.dragTool.preventEvent(e)},stop:function(e){var t=s.dragTool.current,n=o.data(t.el,"app/widgets/drag/app-dragdata");return o(document).unbind("mousemove",s.dragTool.drag).unbind("mouseup",s.dragTool.stop),n.options.stop&&n.options.stop.apply(t.el,[t.el]),s.dragTool.current=null,document.onselectstart=function(e){return!0},s.dragTool.preventEvent(e)},preventEvent:function(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1}},s.dragTool}),define("app/widgets/drag/app-dialogdrag",["app/core/app-jquery","app/core/app-core","app/data/app-ajax","app/widgets/drag/app-drag"],function(r,i,e){var a=".dialog-header,.dlg-box-head";r.fn.dialogDrag=function(e){return a=e&&e.dragTarget?e.dragTarget:".dialog-header,.dlg-box-head","string"==typeof e&&"destroy"==e?this.each(function(){r(a,this).unbind("mousedown")}):this.each(function(){var n=r(this);r(a,n).mousedown(function(e){var t=r(e.target);if(!(t.is("label")||t.is("input")||t.is("a")||0<t.parents("a").size()))return i.dialog.switchDialog(n),n.data("task",!0),setTimeout(function(){n.data("task")&&r.dialogDrag.start(n,e)},100),r(document).on("mouseup",{$dlg:n},function(e){return n.data("task",!1),r(document).unbind("mouseup",arguments.callee),!0}),!0})})},r.dialogDrag={_init:function(e){var t=r("#dialogProxy");t.size()||(t=r(i.frags.dialogProxy),r("body").append(t)),r("h5",t).html(r(a+" h5",e).html())},start:function(e,t){this._init(e);var n=r("#dialogProxy");return n.css({left:e.css("left"),top:e.css("top"),marginLeft:e.css("marginLeft"),height:e.css("height"),width:e.css("width"),zIndex:parseInt(e.css("zIndex"))+1}).show(),r("div.dialog-content",n).css("height",r("div.dialog-content",e).css("height")),n.data("dialog",e),n.drager({selector:a,stop:this.stop,event:t}),!1},stop:function(){var e=r(arguments[0]);e.data("dialog").css({left:e.css("left"),top:e.css("top")}),e.hide()}}}),define("app/widgets/window/app-dialog",["app/core/app-jquery","app/core/app-core","app/data/app-ajax","app/core/app-options","app/widgets/drag/app-dialogdrag"],function(p,f,e,g){var u=0,h=1,m="_dialog_open_statue";function c(t,n){if(n.mask){var e=p("#_dialogMask");0==e.size()&&p("body").append("<div id='_dialogMask' class='dialog-mask'></div>"),e.css("zIndex",g.zindexs.dialogMask),p("#_dialogMask").show()}var r=p("div.dialog-header h5,div.dlg-box-head h5",t);if(0<r.length&&!r.html()){var i=p("title",t),a=i.html();i.remove(),a||(a=n.title||"对话框");var o=i.attr("icon")||n.icon;o&&(a='<i class="'+o+'"></i><span>'+a+"</span>"),r.html(a)}t.one("hide",function(){n.src&&p(n.src).focus();var e=n.closeCallback;e&&p.isFunction(e)&&e(t,n)}),p("body").height()<t.height()&&t.height(p("body").height());var s=p(".dialog-content",t),l=p(".dialog-header,.dlg-box-head",t);l.on("selectstart",function(){return!1}),l.on("copy",function(){return!1}),l.on("paste",function(){return!1}),l.on("cut",function(){return!1});var u=p(".dialog-footer",t),c=(Math.min(t.height(),p(document).height()),t.outerHeight()-l.outerHeight()-u.outerHeight());s.innerHeight(c),n.width&&s.outerWidth()>n.width&&t.width(s.outerWidth()),f.dialog.relayout(t),f.dialog.setCurrent(t);var d=n.callback;d&&p.isFunction(d)&&d(t,n),n&&n.afterShow&&n.afterShow.call(this,t),"url"==n.mode?t.on(f.eventType.pageLoad,function(){timeout=setTimeout(function(){t.css("visibility",""),t.show()},50)}):(t.css("visibility",""),t.show()),t.data(m,h)}return f.dialog={_op:{hasheader:!0,mask:!0,dragTarget:null,drawable:!0,reload:!0,mode:"url",beforShow:function(){},afterShow:function(){},afterClose:function(){}},_current:[],_zIndex:42,getCurrent:function(){return 0==this._current.length?null:this._current[this._current.length-1]},getDialog:function(e){for(var t=0,n=this._current.length;t<n;t++)if(this._current[t].is("#"+e))return this._current[t];return null},relayout:function(e){e||(e=this.getCurrent()),e.css("left",Math.max((p(window).width()-e.width())/2,0)+"px"),e.css("top",Math.max((document.body.clientHeight-e.height())/2,0)+"px")},reload:function(e,t){var n=t.dialogId&&p("#_dialogs #"+t.dialogId)||this.getCurrent();if(n&&0!=n.size()){var r=p.extend({},n.data("options"),t);if(n.data("options",r),r.hasheader&&n.find(">:not(:first)").remove(),n.data("url",e),r.reload?n.attr("reload","true"):n.removeAttr("reload"),"url"==t.mode){var i={type:"POST",url:e,data:r.params,history:!1,operator:r.operator?r.operator:"append",callback:function(e){p(".btn.close",n).click(function(){return f.dialog.close(n),!1}),r.dragTarget?n.dialogDrag(r):r.drawable&&!r.hasheader&&n.dialogDrag(r),f.dialog.setCurrent(n),t&&t.beforShow&&t.beforShow.call(this,n),c(n,r)},error:function(){n.data(m,"")}};t.onPageLoad&&(i.onPageLoad=t.onPageLoad),t.beforePageInit&&(i.beforePageInit=t.beforePageInit),n.loadAppURL(i)}else"html"==t.mode?(n.append(e),p(".btn.close",n).click(function(){return f.dialog.close(n),!1}),t&&t.beforShow&&t.beforShow.call(this,n),n.one(f.eventType.pageLoad,{$dlg:n},function(e){f.dialog.relayout(e.data.$dlg)}),n.initPageUI(),c(n,r)):"node"==t.mode&&(t.hasheader?n.find(">:not(.dialog-header)").remove():n.empty(),n.append(p(e)),p(".btn.close",n).click(function(){return f.dialog.close(n),!1}),t.onPageLoad&&n.one(f.eventType.pageLoad,{$dlg:n},function(e){t.onPageLoad(t,n)}),n.initPageUI(),t&&t.beforShow&&t.beforShow.call(this,n),n.dialogDrag(t),c(n,r))}},open:function(e,t,n,r){var i=p("#_dialogs");0==i.size()&&(p("body").append('<div id="_dialogs"></div>'),i=p("#_dialogs")),"object"==typeof e?(e=(r=e).url,t=r.dialogId,n=r.title):"object"==typeof t?(t=(r=t).dialogId,n=r.title):"object"==typeof n&&(n=(r=n).title);var a=p("#"+t,i);if(0!=a.size()||"#"!=e){t||(t="dialog"+f.nextId()),r.dialogId=t,r.title=n;var o=p.extend({},f.dialog._op,r);if(!(0<a.size())){if(o.hasheader){var s=$template(f.frags.dialogFrag,o);i.append(p(s.toString()))}else{s=$template(f.frags.dialogNoHeaderFrag,o);i.append(p(s.toString()))}(a=p(">.dialog:last-child",i)).data(m,u),o.bindData&&a.data("bindData",o.bindData),p.fn.bgiframe&&a.bgiframe();var l=o[f.eventType.pageLoad];return"function"==typeof l?a.on(f.eventType.pageLoad,l):!1===o.pageLoad&&a.unbind(f.eventType.pageLoad),a.find(".dialog-header").find("h5").html(n),r.width&&a.css("width",r.width),r.height&&a.innerHeight(r.height),o.mask||a.click(function(){f.dialog.switchDialog(a)}),o.drawable&&o.hasheader&&a.dialogDrag(),p("a.close",a).click(function(e){return f.dialog.close(a,e),!1}),a.attr("reload",o.reload),this.reload(e,o),a}a.data(m)!==u&&(a.data(m,u),o.reload||e!=a.data("url")?this.reload(e,o):c(a,o),a.removeData("bindData"),o.bindData&&a.data("bindData",o.bindData))}},setCurrent:function(e){var t=this.getCurrent();t&&t.is(e)||(e.css("zIndex",g.zindexs.dialog),this._current.push(e),t&&t.css("zIndex",g.zindexs.dialogBack))},switchDialog:function(e){if(null!=e&&0!=e.length&&!e.is(this.getCurrent())){var t=e.css("zIndex");if(this.getCurrent()){var n=p(this.getCurrent()).css("zIndex");p(this._current).css("zIndex",t),e.css("zIndex",n);for(var r=0;r<this._current.length;r++)e.equalObject(this._current[r])&&this._current.splice(r,1);this._current.push(e)}}},close:function(e,t){if(e){var n=e.data("options");if(n&&n.beforeClose&&!1===n.beforeClose.call(this,e,t))return}if("string"==typeof e&&(e=p("#_dialogs #"+e)),null!=e&&0!=e.length){e.css("display","none");for(var r=0;r<this._current.length;r++)e.equalObject(this._current[r])&&this._current.splice(r,1);var i=this.getCurrent();null!=i?i.css("zIndex",g.zindexs.dialog):p("#_dialogMask").hide(),e.trigger("hide"),"true"==e.attr("reload")&&(f.destroyDom(e),e.trigger(f.eventType.pageDestroy).remove()),n&&n.afterClose&&n.afterClose.call(this,e)}},closeCurrent:function(){this.close(this.getCurrent())},getBindData:function(e){return e||(e=this.getCurrent()),e.data("bindData")},checkTimeout:function(){var e=p(".dialog-content",this.getCurrent()),t=f.jsonEval(e.html());t&&t.statusCode==f.statusCode.timeout&&this.closeCurrent()}},p.fn.closeDialog=function(){f.dialog.close(p(this))},p.fn.showDialog=function(){f.dialog.setCurrent(p(this)),p(this).show()},p.closeDialog=function(e){e?e.closeDialog():f.dialog.closeCurrent()},p.openModalDialog=function(e){return f.dialog.open(e)},p(document).on("click","a[target=dialog]",function(e){e.preventDefault();var t=p(this).getJsonAttr("_dialog_options");p.openModalDialog(t)}),f.dialog}),define("app/app-funcbase",["app/core/app-jquery","app/core/app-core"],function(l,o){return{openDialog:function(e){"string"==typeof e&&(e={url:e});var t=e.url;if(t){0!=t.indexOf(_contextPath)&&(0!=t.indexOf("/")&&(t="/"+t),t=_contextPath+t);var n=e.dialogId;n||(n="dialog"+o.nextId(),e.dialogId=n,e["data-target"]="#"+n),e.url=t,require(["app/widgets/window/app-dialog"],function(){l.openModalDialog(e)})}},editGridRowDialog:function(a){require(["app/widgets/window/app-dialog","app/widgets/window/app-messager"],function(e,t){var n=a.gridId;if(n){var r=o("#"+n);if(0!=r.length){var i=r.bsgrid("getSelectRowId");i?(a.params={id:i},l.openModalDialog(a)):t.warn("请选中一行数据后再编辑！")}else t.error("请指定列表对象！")}else t.error("请指定列表对象！")})},deleteGridSelRows:function(s){require(["app/widgets/window/app-messager","app/data/app-ajax"],function(e,t){var n=s.gridId;if(n){var r=l("#"+n);if(0!=r.length){var i=s.delUrl;if(i){i.startsWith("/")||(i="/"+i),i=_contextPath+i;var a=r.bsgrid("getSelectRowId");if(a&&0<a.length){var o={type:"POST",url:i,data:{ids:a},dataType:"json",cache:!1,beforeCall:"confirmPrompt",confirm:"确认删除这些数据吗？",afterCall:"refreshTable"};t.ajaxCall(o)}else e.warn("请选中需要删除的数据！")}else e.error("请指定删除数据的服务地址！")}else e.error("请指定列表对象！")}else e.error("请指定列表对象！")})},editSingleDataDialog:function(i){require(["app/widgets/window/app-dialog","app/widgets/window/app-messager"],function(e,t){var n=i.url;if(n){n.startsWith("/")||(n="/"+n),n=_contextPath+n;var r=i.id;r?(i.params={id:r},i.url=n,l.openModalDialog(i)):t.error("参数设置错误！")}else t.error("请指定加载表单数据的服务地址！")})},deleteSingleData:function(a){require(["app/widgets/window/app-messager","app/data/app-ajax"],function(e,t){var n=a.url;if(n){n.startsWith("/")||(n="/"+n),n=_contextPath+n;var r=a.id;if(r){var i={type:"POST",url:n,data:{id:r},dataType:"json",cache:!1,beforeCall:"confirmPrompt",confirm:a[confirm]||"确认删除这些数据吗？",afterCall:"refreshTable"};t.ajaxCall(i)}else e.error("参数设置错误！")}else e.error("请指定删除数据的服务地址！")})},saveFormDialog:function(e){"string"==typeof e&&(e={formId:e});var t=o.getContainer();require(["app/widgets/form/app-form"],function(){e.formId?l("#"+e.formId,t).submitForm(e):l("form",t).submitForm(e)})},transferGridColumn:function(e,t,n){return"1"==e?"<font color='green'>√</font>":""},transferGridColumn2:function(e,t,n){return e==undefined?"":"1"==e?"<font color='green'>√</font>":"<font style='color:red !Important'>╳</font>"},transferFormColumn:function(e){return"1"==e?"<font color='green'>√</font>":""},closeDialog:function(){o.dialog.closeCurrent()}}}),define("bs-http-plugin/base-pluginvoke",["app/core/app-class","app/core/app-attribute","app/core/app-events","bs-http-plugin/config","bs-http-plugin/data-transmit/socket","bs-http-plugin/util/uuid","app/widgets/window/app-dialog","app/widgets/window/app-messager","base/dotpl-js","app/app-funcbase","base/base64"],function(e,t,n,l,u,c){var d=e.create({Implements:[t,n],module:"",config:{appId:"bosssoft"},isShowHelp:!0,downloadUrl:l.downloadUrl,functions:[],processes:[],initialize:function(e){var t=this;if($.extend(t,e),l.initUpdate&&d.clientUpdate(l.updateUrl),t.addConfig("version",l.version),"undefined"==typeof t.module)throw new Error("请设置module属性!");t.initMethods(t.functions,"func"),t.initMethods(t.processes,"proc"),t.initStateDefer=t.init()},initMethods:function(e,r){var i=this;$.isArray(e)&&$(e).each(function(e,t,n){"undefined"==typeof i[t]&&i.generateFun(t,r)})},operateConfig:function(t,n){var r=this;if(!$.isFunction(r[t]))throw new Error(t+" 不是函数...");return n["-isOptions-"]=!0,function(){var e=[].slice.apply(arguments);return e.unshift(n),r[t].apply(r,e)}},generateFun:function(i,e){var a=this,t="",n="";if("string"===$.type(i))t=n=i;else if("object"===$.type(i)&&(t=i.jsName,n=i.dllName,"string"===$.type(t)&&"undefined"===$.type(n)&&(n=t),"undefined"===$.type(t)&&"string"===$.type(n)&&(t=n),"undefined"===$.type(t)&&"undefined"===$.type(n)))throw new Error("必须定义一个jsName 或者 dllName");var o={module:a.module};o[e]=n,a[t]=function(e){var t=a._initArgs(arguments);$.extend(!0,t,o);var n=a.newOperation(t),r=function(){return a.operate.apply(a,[t])};return!1===i.initRequired?r():$.when(a.initStateDefer).done(function(){r()}).fail(function(){n.reject.apply(n,arguments),a.isShowHelp&&a.showHelp()}),n}},_initArgs:function(e){var t=[].slice.apply(e,[1]),n=e[0];return"object"===$.type(n)&&!0===n["-isOptions-"]||(n={},t=[].slice.apply(e)),n.data=t,n},newOperation:function(e){return e["-operateDefer"]=$.Deferred()},setOperation:function(e){return e["-operateDefer"]?e["-operateDefer"]:e["-operateDefer"]=$.Deferred()},getInitState:function(){return this.initStateDefer},init:function(){var e=$.Deferred();return e.resolve(),e},onError:function(e,t,n){},operate:function(t){var n=this,r=n.setOperation(t),e=c.v4().replace(/-/g,""),i={id:e,payload:Base64.encode(JSON.stringify({config:n.config,data:t.data}))};t.func?i.func=t.func:t.proc&&(i.proc=t.proc);var a=$.extend({},t,{id:e,url:l.url+n.module,data:i,sliceSize:t.sliceSize}),o=u.sendByIframe(a),s=[d.heartbeat().fail(function(){n.getInitState().reject.apply(n.getInitState(),arguments),n.isShowHelp&&n.showHelp()}),r,o];return $.when.apply($,s).fail(function(){var e=[];e=e.concat([].slice.call(arguments,0)),n.onError.apply(n,e),r.rejectWith(t,e)}),r},addConfig:function(e,t){"string"===$.type(e)&&(this.config[e]=t)},removeConfig:function(e){delete this.config[e]},destroy:function(){for(var e in this)this.hasOwnProperty(e)&&delete this[e]},bind:function(e,t){this.on(e,t,this)},unbind:function(e){"string"==typeof e&&this.off(e,null,this)},enableShowHelp:function(e){this.setDownloadUrl(e),this.isShowHelp=!0},disableShowHelp:function(){this.isShowHelp=!1},setDownloadUrl:function(e){"string"===$.type(e)&&(this.downloadUrl=e)},showHelp:function(){if(!$("#bsClientHelpDlg").length){var e=$(dotpl.applyTpl('                    <div class="dlg-box-head" id="unInstallControl_dialog" style="height:50px;">                    <div class="dlg-box-head-left" id="dragTarget" style="height:40px;width:480px;display:inline;">                      <span class="dlg-box-head-title" style="font-size:18px">控件提示</span> <span class="dlg-box-head-text"></span>                        </div>                    <div class="dlg-box-head-right" style="width:60px;float:right;display:inline;">                    </div>                    </div>\t                    <div class="dialog_content" style="height: 210px;">                    <div style="box-sizing: border-box;height:100px;padding:40px 20px 20px 20px;;font-size:16px;font-weight:normal;text-align:center;">本系统需要安装    <span style="color:red;">博思客户端助手</span>   才能保证正常运行</div>                     <div style="height:60px;padding:20px 20px;font-size:16px;font-weight:normal;text-align:center;">                     <a id="startBtn" class="app-button l-btn l-btn-small" style="height:35px;background:#449d44;color:#fff;margin-right:20px;filter:none;">                            <span class="l-btn-left">                                <span class="l-btn-text" style="font-size:14px;padding-top:3px;">启动博思客户端</span>                            </span>                        </a>                    <a id="handlerStartBtn" data-url="${startUrl}" class="app-button l-btn l-btn-small" style="height:35px;background: rgba(206, 52, 38, 0.8);color:#fff;margin-right:20px;filter:none;display:none;">                            <span class="l-btn-left">                                <span class="l-btn-text" style="font-size:14px;padding-top:3px;">手动启动博思客户端</span>                            </span>                        </a>                    <a id="downBtn" data-url="${downloadUrl}" class="app-button l-btn l-btn-small" style="height:35px;background:#ec971f;color:#fff;margin-right:20px;filter:none;">                            <span class="l-btn-left">                                <span class="l-btn-text" style="font-size:14px;padding-top:3px;">下载博思客户端助手</span>                            </span>                        </a>                    <a id="closeBtn" class="app-button l-btn l-btn-small" style="height:35px;background:#e6e6e6;color:#333;margin-right:20px;">                            <span class="l-btn-left">                                <span class="l-btn-text" style="font-size:14px;padding-top:3px;">关闭提示</span>                            </span>                        </a>                    </div>                     </div>',{downloadUrl:this.downloadUrl,startUrl:l.startUrl}));e.find("#downBtn").on("click",function(){window.open($(this).data("url"),"下载博思客户端")}),e.find("#handlerStartBtn").on("click",function(){window.open($(this).data("url"),"通过浏览器手动启动博思客户端")}),e.find("#startBtn").on("click",function(){u.get({url:l.guardUrl+"?ct=2",timeout:1e4,data:{payload:{}}}).done(function(){$("#bsClientHelpDlg").fadeOut(1e3),$A.messager.correct("启动成功!",3e3),setTimeout(function(){$("#bsClientHelpDlg").closeDialog(),l.initUpdate&&d.clientUpdate(l.updateUrl)},2500)}).fail(function(){$A.messager.warn("启动失败，请尝试手动启动或重新安装博思客户端..."),$("#startBtn").hide(),$("#handlerStartBtn").css("display","inline-block")}).always(function(){})}),e.find("#closeBtn").bind("click",function(){$("#bsClientHelpDlg").closeDialog()});var t={dialogId:"bsClientHelpDlg",hasheader:!1,height:"260px",width:"200px",mode:"node",url:e,beforeClose:function(){},onPageLoad:function(){}};$.openModalDialog(t)}},Statics:{create:function(e){return new d(e)},heartbeat:function(e){$.isNumeric(e)||(e=l.timeout);var t=$.Deferred(),n="heartbeat_"+c.v4().replace(/-/g,"");window[n]=function(){t.resolve()};var r=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.charset="utf-8",i.async=!0,i.src=l.url+l.heartbeat+"?jsonp="+n;var a=e/2,o=0,s=setInterval(function(){e<=(o+=a)&&(window[n]=undefined,clearInterval(s),"pending"==t.state()&&t.reject({code:"timeout",msg:"超时"}))},a);return r.appendChild(i),t},clientUpdate:function(e,t){return $.isNumeric(t)||(t=l.timeout),u.get({url:l.url+l.update,timeout:t,data:{url:e,payload:{}}}).done(function(){}).fail(function(){})}}});return d}),define("bs-http-plugin/bs-ca-auth",["bs-http-plugin/base-pluginvoke"],function(e,t){var n=e.extend({module:"ca",functions:["doSign","initParams"],doSign:function(e){var t={signText:"",provider:undefined};return"object"===$.type(e)?(t.signText=e.signText,"string"==$.type(e.provider)&&(t.provider=e.provider)):"string"===$.type(e)&&(t.signText=e,t.provider=$A.getCaProvider()),"string"!=$.type(t.cryptoType)&&(t.cryptoType=$A.getCaCryptoType()),"string"!=$.type(t.provider)?$.Deferred().reject("CA验证提供商为空"):this.operate({data:[t],func:"doSign"})},validateSN:function(e){var t={signText:"",provider:undefined,validateSN:!0};if("object"===$.type(e)?(t.signText=e.signText,"string"==$.type(e.provider)&&(t.provider=e.provider)):"string"===$.type(e)&&(t.signText=e,t.provider=$A.getCaProvider()),"string"!=$.type(t.provider))return $.Deferred().reject("CA验证提供商为空");var n=$A.getCaInfo();if(!n||!n.caNo){return $.Deferred().reject("Ukey信息与当前ca产商不一致，请联系管理员！")}return t.certNo=n.caNo,this.operate({data:[t],func:"doSign"})},Statics:{getInstance:function(e){return this.instance||(this.instance=new n(e)),this.instance}}});return n}),define("bs-http-plugin/bs-doccamera",["bs-http-plugin/base-pluginvoke","bs-http-plugin/util/uuid"],function(e,r){var t=e.extend({module:"Doccamera",functions:["TakePhotoes","GetImageList","GetImageListWithoutBase64","GetImages","ClearImages"],getPicture:function(t,e){var n=this,r=$.Deferred(),i=function(){n[e]().then(function(e){e[t]&&r.resolve(e[t]),e[t]||0==e.state||setTimeout(function(){i()},2500)}).fail(function(){r.rejectWith(r,arguments)})};return i(),r},takePicture:function(){var e=this,t=r.v4().replace(/-/g,"");return e.TakePhotoes({id:t}).then(function(){return e.getPicture(t,"GetImageList")})},bufferTakePicture:function(){$.Deferred();var t=this,n=r.v4().replace(/-/g,"");return t.TakePhotoes({id:n}).then(function(){return t.getPicture(n,"GetImageListWithoutBase64")}).then(function(e){return t.getImagesAndClean(n,e)})},getImgSize:2,getImagesAndClean:function(t,e){var n=this,r=$.Deferred(),i=e.pictures;$.isArray(i)||r.rejectWith(this,["picture is not array!"]),i=$(i).map(function(e,t){return t.filename}).toArray();var a={},o=[],s=function(){if(0==i.length)return r.resolve(a),void n.ClearImages();n.GetImages({pictures:i.splice(0,n.getImgSize)}).then(function(e){a=e[t],o=o.concat(a.pictures),a.pictures=o,s(),!e[t]&&e.state}).fail(function(){r.rejectWith(r,arguments)})};return s(),r},Statics:{getInstance:function(e){return this.instance||(this.instance=new t(e)),this.instance}}});return t}),define("bs-http-plugin/bs-pd",["bs-http-plugin/base-pluginvoke"],function(e,t){var n=e.extend({module:"pd",functions:["expPd","impPd"],Statics:{getInstance:function(e){return this.instance||(this.instance=new n(e)),this.instance}}});return n}),define("bs-http-plugin/bs-pos",["bs-http-plugin/base-pluginvoke"],function(e,t){var n=e.extend({module:"pos",functions:["doPos","initParams"],Statics:{getInstance:function(e){return this.instance||(this.instance=new n(e)),this.instance}}});return n}),define("bs-http-plugin/util/img-lazyload",["jquery"],function(e){!function(d){function c(l,e,u,c){var t=l.find(e);t=t.filter(function(e,t){return!d(t).attr("lazyloaded")}),d(t).each(function(e,t){var n,r,i,a=d(t);if(t.offsetTop<parseInt(l.height())+parseInt(l.scrollTop())&&a.attr("src")===u){a.attr("lazyloaded",!0);var o=a.attr("data-src"),s=d(document.createElement("img"));s.attr("src",o),d("body").append(s),s.hide(),n=s[0],r=function(){a.attr("src",o),s.remove(),c(a)},i=setInterval(function(){n.complete&&(r(n),clearInterval(i))},500)}})}d.fn.extend({imgLazyLoad:function(e,n,t){var r,i,a,o,s,l,u=d(this);t=d.isFunction(t)?t:d.noop,u.find(e).each(function(e,t){d(t).attr("lazyloaded")||d(t).attr("src",n)}),u.scroll((r=c,i=[u,e,n,t],a=500,o=1e3,l=new Date,function(e){var t=this,n=new Date;i.push(e),clearTimeout(s),o<=n-l?(r.apply(t,i),l=n):s=setTimeout(function(){r.apply(t,i)},a)})),c(u,e,n,t)}})}(e)}),define("bs-http-plugin/bs-print",["bs-http-plugin/base-pluginvoke","bs-http-plugin/data-transmit/socket","bs-http-plugin/config","bs-http-plugin/util/img-lazyload"],function(e,t,n){var r=e.extend({module:"print",functions:[{jsName:"initParams",dllName:"initParams",initRequired:!1},"doPrintRemoteImage","getTemplateList","getDefaultTemplete","getLocal","setLocal","getPrinter","setPrinter","getPrintSet","getTemplatePath","getPrintPreviewImage","doDesign","doPreview","printReport","doPrintMultiSubReport","doCoordinate","doCustomPrint","openFile","exportMedia"],init:function(){var e=this.initOptions,r=$.Deferred();return this.initParams(e).done(function(e,t,n){r.resolve()}).fail(function(e,t,n){r.reject({code:-1,msg:"初始化失败！！！！"})}),r},template:{printPreViewDialog:'                <div class="dlg-box-head">                    <div class="dlg-box-head-left">                        <span class="dlg-box-head-title">打印预览</span>                        <span class="pre-view-msg"></span>                    </div>                    <div class="dlg-box-head-right">                        <div class=" btnarea menubar btn-dlg-toolbar">                        </div>                    </div>                </div>                <div class="dialog-content print-pre-view" style="padding: 30px;">                </div>',printDialog:'            <div class="dlg-box-head">                <div class="dlg-box-head-left">                    <span class="dlg-box-head-title">打印</span>                </div>            </div>            <div class="dialog-content print-pre-view">                <span class="print-view-msg"></span>            </div>'},exportMedia:function(t){var n=this;return n.openFile().then(function(e){return t.ExportPath=e,n.operate({data:[t],func:"exportMedia"})})},doPreview:function(){var x=this,w=x._initArgs(arguments),C=$.Deferred();return $.when(x.initStateDefer).done(function(){var e=x.getItem(w,"DialogOptions");e="undefined"===$.type(e)?{}:e;var t=x.getItem(w,"ShowForm"),r=x.getItem(w,"PrintPreview"),i=x.getItem(w,"MessageDialog"),s=x.getItem(w,"DefImg");"undefined"===$.type(i)&&(i=!0),t=!1!==t||t,x.setItem(w,"ShowForm",t);var l=!t&&r,u=x.getItem(w,"PrintData"),c=(u=$.isArray(u)?u:[u]).length,d=x.getItem(w,"PrintSize");d=$.isNumeric(d)?d:c;var a=x.getItem(w,"PrintCallBack");a=x.isFunction(a);var p=x.getItem(w,"ProcessChange");p=x.isFunction(p),s||(s=$A.getHostUrl()+"resources/common/themes/images/print/default.gif");var f={printSuccessMsg:"打印成功！",printErrorMsg:"预览失败！",preViewSuccessMsg:"预览成功！",preViewErrorMsg:"预览成功！",printDoingMsg:"正在打印",preViewDoingMsg:"正在预览",getSuccessMsg:function(){return r?this.preViewSuccessMsg:this.printSuccessMsg},getErrorMsg:function(){return r?this.preViewErrorMsg:this.printErrorMsg},getDoingMsg:function(){return r?this.preViewDoingMsg:this.printDoingMsg}};$.extend(f,x.getItem(w,"Message"));var g=[],o=$(document.body).css("overflow");$(document.body).css("overflow","hidden");var h="",m={dialogId:"_dlgdoPreViewImg",hasheader:!1,title:" ",height:"75%",width:"60%",mode:"node",buttons:[{id:"btnPrint",text:"打印",visible:!1,click:function(){w.func="doPrintImage",x.newOperation(w),x.setItem(w,"PrintData",g);var e=$.extend(!0,{},m);e.dialogId="_printDlg",e.beforeClose=$.noop,e.url=dotpl.applyTpl(x.template.printDialog,{msg:f.printDoingMsg+"请稍后..."}),e.width="600px",e.height="200px",i&&$.openModalDialog(e);var t=$("#"+e.dialogId);$.when(x.operate(w)).done(function(e){t.find(".print-view-msg").removeClass("print-view-msg").addClass("print-view-msg-success").text(f.printSuccessMsg),t.fadeOut(2600,function(){t.closeDialog()}),C.resolve.apply(C,arguments)}).fail(function(e){C.resolve.apply(C,arguments),t.find(".print-view-msg").removeClass("print-view-msg").addClass("print-view-msg-success").text(f.printErrorMsg)}),a()}},{id:"btnClose",text:"关闭",click:function(){$("#"+m.dialogId).closeDialog()}}],buttonsExt:[],buttonGen:function(){var r=$("#"+m.dialogId).find(".dlg-box-head-right>div"),e=this.buttons.concat(this.buttonsExt);$(e).each(function(e,t){var n=$(dotpl.applyTpl('<a id="${id}" class="app-button hidden l-btn l-btn-large l-btn-plain">                                        <span class="l-btn-left l-btn-icon-top">                                            <span class="l-btn-text">${text}</span>                                            <i class="l-btn-icon add48">&nbsp;</i>                                        </span>                                    </a>',t));n.on("click",t.click),!1===t.visible&&n.hide(),r.append(n)})},beforeClose:function(){$(document.body).css("overflow",o)}};l?h=x.template.printPreViewDialog:(h=x.template.printDialog,m.height="220px",m.width="600px"),$.extend(!0,m,e),m.url=$(h),$("#"+m.dialogId).length&&$("#"+m.dialogId).closeDialog(),i&&$.openModalDialog(m),m.buttonGen();var v=$("#"+m.dialogId),b=v.find(".dialog-content"),y=l?v.find(".pre-view-msg"):v.find(".print-view-msg");!function n(i,a){i.func="doPreview";var e=a+d;c<e&&(e=c);x.setItem(i,"PrintData",u.slice(a,e));var o={index:0==e?1:e,total:0==c?1:c};a=e;x.newOperation(i);$.when(x.operate(i)).done(function(r){var e=p(r,a,c),t="(${index}/${total})";if(t=dotpl.applyTpl(t,o),l?(g=g.concat(r.list),$(r.list).each(function(e,t){var n=$('<img style="display: block;margin: 100px auto;" />');n.attr("data-src",r.url+"?fn="+t),b.append(n)}),b.imgLazyLoad("img",s,function(e){e.addClass("print-img-loaded"),e.attr("style","")}),t="正在生成预览图片"+t):t=f.getDoingMsg()+t,"undefined"!==$.type(e)&&(t=e),y.text(t),a==c)return l?(v.find("#btnPrint").css("display","inline-block"),y.fadeOut(600,function(){y.remove()})):setTimeout(function(){y.removeClass("print-view-msg").addClass("print-view-msg-success").text(f.getSuccessMsg()),v.fadeOut(2600,function(){v.closeDialog()})},800),void C.resolve.apply(C,arguments);n(i,a)}).fail(function(){C.reject.apply(C,arguments),t&&(y.removeClass("print-view-msg").addClass("print-view-msg-success").text(f.getErrorMsg()),v.fadeOut(2600,function(){v.closeDialog()}))})}(w,0)}).fail(function(){}),C},doImage:function(){var t=this,n=$.Deferred(),r=t._initArgs(arguments);return $.when(t.initStateDefer).done(function(){t.setItem(r,"ShowForm",!1),t.setItem(r,"PrintPreview",!0);var e=t.getItem(r,"PrintData");$.isArray(e)||(e=[e],t.setItem(r,"PrintData",e)),r.func="doPreview",t.newOperation(r),t.operate(r).done(function(){n.resolveWith(r,arguments)}).fail(function(e){n.rejectWith(r,arguments)})}).fail(function(){n.reject()}),n},getItem:function(e,t){return e.data[0][t]},setItem:function(e,t,n){return e.data[0][t]=n},isFunction:function(e){return $.isFunction(e)?e:function(){}},Statics:{getDefInstance:function(e){var t={initOptions:{Cookie:n.cookies,HostUrl:$A.getHostUrl(),DownLoadUrl:"undefined",QueryTempListUrl:"undefined",QueryTempNameUrl:"undefined"}};return"undefined"===$.type(e)&&(e={}),$.extend(!0,e,t),this.instance&&"rejected"!==this.instance.getInitState().state()||(this.instance=new r(e)),this.instance},getInstance:function(e){return this.instance&&"rejected"!==this.instance.getInitState().state()||(this.instance=new r(e)),this.instance}}});return r}),function(e){var t=function(){var r=this;r.msgStack={},window.onmessage=function(e){e||(e=window.event);var t=e.data;t=$.parseJSON(t);var n=r.get(t.id);n&&n.call({},t)}};t.prototype={constructor:t,set:function(e,t){this.msgStack[e]=t},get:function(e){var t=this.msgStack[e];return t&&delete this.msgStack[e],t}};var n=new t,o=function(){return this.ret.ret_msg},r=function(){};r.prototype={constructor:r,send:function(r){var e=r.data;if(r.id=r.data.id=(new Date).getTime(),"undefined"==typeof e.payload)throw new Error("data.payload not found!");var t=e.payload;t=JSON.stringify(t),t=this.base64Encode(t),r.data.payload=t;var i=this.createIframe(r),a=this.createForm(r);a.find('[name="payload"]').val(t);n.set(r.id,function(e){"undefined"===e&&(e={}),e.getResult=o;var t=[e.getResult()];try{(t=t.concat([].slice.call(arguments,0))).push(r),"0"===e.ret.ret_code?r.success.apply(r,t):r.error.apply(r,t),a.remove(),i.remove()}catch(n){throw a.remove(),i.remove(),n}}),a.submit(),$.ajax({url:"http://127.0.0.1:13526/heart",timeout:r.timeout?r.timeout:3e3,contentType:"application/x-www-form-urlencoded; charset=utf-8",dataType:"jsonp",jsonp:"jsonp",type:"GET",error:function(){a.remove(),i.remove(),r.clientError.apply(r,arguments)}})},createIframe:function(e){var t=$('<iframe                                 id="socketIframe$id"                                 name="socketIframe$id"                                 style="position:absolute; top:-9999px; left:-9999px">                            </iframe>'.replace(/\$id/g,e.id));return t.appendTo("body"),t},createForm:function(e){e.func?(e.invokeType="func",e.invokeValue=e.func):(e.invokeType="proc",e.invokeValue=e.proc);var t=$('<form id="socketForm$id" name="socketForm$id"                 target="socketIframe$id"                 action="$url"                 method="post"                 accept-charset="UTF-8"                 >                 <input type="hidden" name="$invokeType" value="$invokeValue" />                 <input type="hidden" name="id" value="$id" />                 <input type="hidden" name="payload" />                 </form>'.replace(/\$id/g,e.id).replace(/\$url/,e.url).replace(/\$invokeType/,e.invokeType).replace(/\$invokeValue/,e.invokeValue));return t.appendTo("body"),t},base64Encode:function(e){return Base64.encode(e)}};var a=new r,i=function(){};i.prototype={constructor:i,doSign:function(e){var t=$.isFunction(e.success)?e.success:$.noop,n=$.isFunction(e.success)?e.success:$.noop,r=$.isFunction(e.clientError)?e.clientError:$.noop;delete e.success,delete e.error,delete e.clientError;var i={url:"http://127.0.0.1:13526/ca",func:"doSign",success:t,error:n,clientError:r,data:{payload:{config:{appId:"cas-server"},data:[e]}}};a.send(i)}},e.casLogin=new i}(window),define("bs-http-plugin/cas-login",function(){}),define("app/widgets/app-lang_zh_CN",["app/core/app-jquery","app/core/app-core","app/util/app-utils"],function(e,t,n){var r={locale:"zh_CN",msg:function(e,t){return n.format(this._messages[e],t)},_messages:{validateFormError:"提交数据不完整，{0}个字段有错误，请改正后再提交! ",alertSelectMsg:"请选择信息!"},messager:{OK:"确定",CANCEL:"取消",CONFIRM:"确认",ERROR:"错误",WARN:"警告",INFO:"信息",CORRECT:"成功",PROMPT:"提示"},dataTable:{oLanguage:{oPaginate:{sFirst:"首页",sLast:"末页",sPrevious:"上一页",sNext:"下一页"},sLengthMenu:"每页显示 _MENU_ 条",sSearch:"查找:_INPUT_",sEmptyTable:"无符合条件的数据",sInfo:"当显示&nbsp;从 _START_ 到 _END_ 条记录&nbsp;&nbsp;&nbsp;总共 _TOTAL_ 记录",sInfoEmpty:"无显示记录",sLoadingRecords:"加载中...",sProcessing:"处理中...",sZeroRecords:"无符合条件的数据"}},pagination:{previous:"上一页",next:"下一页",pageInfo:"总共{0}记录,共{2}页,&nbsp;&nbsp;&nbsp;当显示第{3}页&nbsp;从{4}到{5}条记录",pageSizeInfo:"<ul class='ulnostyle uloneline'><li class='controltxt' >每页</li><li>{0}</li><li class='controltxt'>条记录</li></ul>"},validator:{},datetimepicker:{days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","星期日"],daysShort:["周日","周一","周二","周三","周四","周五","周六","周日"],daysMin:["日","一","二","三","四","五","六","日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],today:"今日",suffix:[],meridiem:[]},magicsuggest:{noSuggestionText:"无相关数据"},flexigrid:{errormsg:"加载数据错误",pagestat:"当前显示从 {from}到{to}条记录&nbsp;&nbsp;&nbsp;总共{total}记录 ",pagetext:"",outof:"/",procmsg:"数据加载中……",nomsg:"无符合条件的数据"}};return t.lang=r,e.jgrid=e.jgrid||{},e.extend(e.jgrid,{defaults:{recordtext:"{0} - {1}　共 {2} 条",emptyrecords:"无符合条件的记录。",loadtext:"读取中...",pgtext:" {0} 共 {1} 页"},search:{caption:"搜索...",Find:"查找",Reset:"重置",odata:[{oper:"eq",text:"等于　　"},{oper:"ne",text:"不等　　"},{oper:"lt",text:"小于　　"},{oper:"le",text:"小于等于"},{oper:"gt",text:"大于　　"},{oper:"ge",text:"大于等于"},{oper:"bw",text:"开始于"},{oper:"bn",text:"不开始于"},{oper:"in",text:"属于　　"},{oper:"ni",text:"不属于"},{oper:"ew",text:"结束于"},{oper:"en",text:"不结束于"},{oper:"cn",text:"包含　　"},{oper:"nc",text:"不包含"}],groupOps:[{op:"AND",text:"所有"},{op:"OR",text:"任一"}]},edit:{addCaption:"添加记录",editCaption:"编辑记录",bSubmit:"提交",bCancel:"取消",bClose:"关闭",saveData:"数据已改变，是否保存？",bYes:"是",bNo:"否",bExit:"取消",msg:{required:"此字段必需",number:"请输入有效数字",minValue:"输值必须大于等于 ",maxValue:"输值必须小于等于 ",email:"这不是有效的e-mail地址",integer:"请输入有效整数",date:"请输入有效时间",url:"无效网址。前缀必须为 ('http://' 或 'https://')",nodefined:" 未定义！",novalue:" 需要返回值！",customarray:"自定义函数需要返回数组！",customfcheck:"Custom function should be present in case of custom checking!"}},view:{caption:"查看记录",bClose:"关闭"},del:{caption:"删除",msg:"删除所选记录？",bSubmit:"删除",bCancel:"取消"},nav:{edittext:"",edittitle:"编辑所选记录",addtext:"",addtitle:"添加新记录",deltext:"",deltitle:"删除所选记录",searchtext:"",searchtitle:"查找",refreshtext:"",refreshtitle:"刷新表格",alertcap:"注意",alerttext:"请选择记录",viewtext:"",viewtitle:"查看所选记录"},col:{caption:"选择列",bSubmit:"确定",bCancel:"取消"},errors:{errcap:"错误",nourl:"没有设置url",norecords:"没有要处理的记录",model:"colNames 和 colModel 长度不等！"},formatter:{integer:{thousandsSeparator:",",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:["日","一","二","三","四","五","六","星期日","星期一","星期二","星期三","星期四","星期五","星期六"],monthNames:["一","二","三","四","五","六","七","八","九","十","十一","十二","一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],AmPm:["am","pm","上午","下午"],S:function(e){return e<11||13<e?["st","nd","rd","th"][Math.min((e-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"Y-m-d",parseRe:/[Tt\\\/:_;.,\t\s-]/,masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO",YearMonth:"F, Y"},reformatAfterEdit:!1},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:!0},idName:"id"}}),r}),define("app-plugin",["bs-http-plugin/base-pluginvoke","bs-http-plugin/bs-ca-auth","bs-http-plugin/bs-doccamera","bs-http-plugin/bs-pd","bs-http-plugin/bs-pos","bs-http-plugin/bs-print","bs-http-plugin/cas-login","bs-http-plugin/config-ext","bs-http-plugin/config","bs-http-plugin/data-transmit/message","bs-http-plugin/data-transmit/socket","bs-http-plugin/util/img-lazyload","bs-http-plugin/util/uuid","app/widgets/app-lang_zh_CN"],function(){}),function(e){var l=function(e,t){return e<<t|e>>>32-t},d=function(e,t){var n,r,i,a,o;return i=2147483648&e,a=2147483648&t,o=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(r=1073741824&t)?2147483648^o^i^a:n|r?1073741824&o?3221225472^o^i^a:1073741824^o^i^a:o^i^a},p=function(e,t,n,r,i,a,o){var s;return e=d(e,d(d((s=t)&n|~s&r,i),o)),d(l(e,a),t)},f=function(e,t,n,r,i,a,o){var s;return e=d(e,d(d(t&(s=r)|n&~s,i),o)),d(l(e,a),t)},g=function(e,t,n,r,i,a,o){return e=d(e,d(d(t^n^r,i),o)),d(l(e,a),t)},h=function(e,t,n,r,i,a,o){return e=d(e,d(d(n^(t|~r),i),o)),d(l(e,a),t)},m=function(e){var t,n="",r="";for(t=0;t<=3;t++)n+=(r="0"+(e>>>8*t&255).toString(16)).substr(r.length-2,2);return n};e.extend({md5:function(e){var t,n,r,i,a,o,s,l,u,c=Array();for(c=function(e){for(var t,n=e.length,r=n+8,i=16*((r-r%64)/64+1),a=Array(i-1),o=0,s=0;s<n;)o=s%4*8,a[t=(s-s%4)/4]=a[t]|e.charCodeAt(s)<<o,s++;return o=s%4*8,a[t=(s-s%4)/4]=a[t]|128<<o,a[i-2]=n<<3,a[i-1]=n>>>29,a}(e=function(e){e=e.replace(/\x0d\x0a/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):(127<r&&r<2048?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t}(e)),o=1732584193,s=4023233417,l=2562383102,u=271733878,t=0;t<c.length;t+=16)o=p(n=o,r=s,i=l,a=u,c[t+0],7,3614090360),u=p(u,o,s,l,c[t+1],12,3905402710),l=p(l,u,o,s,c[t+2],17,606105819),s=p(s,l,u,o,c[t+3],22,3250441966),o=p(o,s,l,u,c[t+4],7,4118548399),u=p(u,o,s,l,c[t+5],12,1200080426),l=p(l,u,o,s,c[t+6],17,2821735955),s=p(s,l,u,o,c[t+7],22,4249261313),o=p(o,s,l,u,c[t+8],7,1770035416),u=p(u,o,s,l,c[t+9],12,2336552879),l=p(l,u,o,s,c[t+10],17,4294925233),s=p(s,l,u,o,c[t+11],22,2304563134),o=p(o,s,l,u,c[t+12],7,1804603682),u=p(u,o,s,l,c[t+13],12,4254626195),l=p(l,u,o,s,c[t+14],17,2792965006),s=p(s,l,u,o,c[t+15],22,1236535329),o=f(o,s,l,u,c[t+1],5,4129170786),u=f(u,o,s,l,c[t+6],9,3225465664),l=f(l,u,o,s,c[t+11],14,643717713),s=f(s,l,u,o,c[t+0],20,3921069994),o=f(o,s,l,u,c[t+5],5,3593408605),u=f(u,o,s,l,c[t+10],9,38016083),l=f(l,u,o,s,c[t+15],14,3634488961),s=f(s,l,u,o,c[t+4],20,3889429448),o=f(o,s,l,u,c[t+9],5,568446438),u=f(u,o,s,l,c[t+14],9,3275163606),l=f(l,u,o,s,c[t+3],14,4107603335),s=f(s,l,u,o,c[t+8],20,1163531501),o=f(o,s,l,u,c[t+13],5,2850285829),u=f(u,o,s,l,c[t+2],9,4243563512),l=f(l,u,o,s,c[t+7],14,1735328473),s=f(s,l,u,o,c[t+12],20,2368359562),o=g(o,s,l,u,c[t+5],4,4294588738),u=g(u,o,s,l,c[t+8],11,2272392833),l=g(l,u,o,s,c[t+11],16,1839030562),s=g(s,l,u,o,c[t+14],23,4259657740),o=g(o,s,l,u,c[t+1],4,2763975236),u=g(u,o,s,l,c[t+4],11,1272893353),l=g(l,u,o,s,c[t+7],16,4139469664),s=g(s,l,u,o,c[t+10],23,3200236656),o=g(o,s,l,u,c[t+13],4,681279174),u=g(u,o,s,l,c[t+0],11,3936430074),l=g(l,u,o,s,c[t+3],16,3572445317),s=g(s,l,u,o,c[t+6],23,76029189),o=g(o,s,l,u,c[t+9],4,3654602809),u=g(u,o,s,l,c[t+12],11,3873151461),l=g(l,u,o,s,c[t+15],16,530742520),s=g(s,l,u,o,c[t+2],23,3299628645),o=h(o,s,l,u,c[t+0],6,4096336452),u=h(u,o,s,l,c[t+7],10,1126891415),l=h(l,u,o,s,c[t+14],15,2878612391),s=h(s,l,u,o,c[t+5],21,4237533241),o=h(o,s,l,u,c[t+12],6,1700485571),u=h(u,o,s,l,c[t+3],10,2399980690),l=h(l,u,o,s,c[t+10],15,4293915773),s=h(s,l,u,o,c[t+1],21,2240044497),o=h(o,s,l,u,c[t+8],6,1873313359),u=h(u,o,s,l,c[t+15],10,4264355552),l=h(l,u,o,s,c[t+6],15,2734768916),s=h(s,l,u,o,c[t+13],21,1309151649),o=h(o,s,l,u,c[t+4],6,4149444226),u=h(u,o,s,l,c[t+11],10,3174756917),l=h(l,u,o,s,c[t+2],15,718787259),s=h(s,l,u,o,c[t+9],21,3951481745),o=d(o,n),s=d(s,r),l=d(l,i),u=d(u,a);return(m(o)+m(s)+m(l)+m(u)).toLowerCase()}})}(jQuery),function(e){var t=function(e){e&&e.appId?e&&e.appKey?e&&e.type?(e=$.extend({},{url:null,appId:null,appKey:null,type:null},e))&&e.url?(this.opt=e,this.action={PRINT:"PRINT",POS:"pos"},bossJS.init({})):alert("请初始化参数ur"):alert("请初始化参数type"):alert("请初始化参数appKey"):alert("请初始化参数appId")};(window.BsIndustryApi=t).prototype={constructor:t,jsRequest:function(e,t,n){if(e){var r=this,i=r.paramBulid(r.opt,t,n,"");return bossJS.Socket.sendByIframe({url:r.opt.url+"/api/"+r.opt.type+"/"+e,data:i}).then(function(e){var t=r.decodeResult(e);return r.actionActive(t,n)}).fail(function(e){return e})}alert("接口标识不能为空")},jsRequestNo:function(e,t,n){if(e){var r=this,i=r.paramBulid(r.opt,t,n,"");return bossJS.Socket.sendByIframe({url:r.opt.url+"/api/"+r.opt.type+"/"+e,data:i}).then(function(e){return r.decodeResult(e)}).fail(function(e){return e})}alert("接口标识不能为空")},getInstance:function(){return bossJS.Print.getInstance({config:{appId:"gov-aims"},onError:function(){},initOptions:{Cookie:"111111111111",HostUrl:$A.getHostUrl(),DownLoadUrl:"xxx.do",QueryTempListUrl:"xxx.do",QueryTempNameUrl:"xxx.do"}})},getPOSInstance:function(){return bossJS.POS.getInstance({config:{appId:"gov-aims"},onError:function(){},initOptions:{Cookie:"111111111111",HostUrl:$A.getHostUrl(),DownLoadUrl:"xxx.do",QueryTempListUrl:"xxx.do",QueryTempNameUrl:"xxx.do"}})},actionActive:function(e,t,n){var r=this;if("S0000"!=e.result)return e;var i=JSON.parse(e.message);return i.action&&""!=i.action?i.action==r.action.PRINT?r.doPreView(r.doDowloadPrint(i.templateID,i.pBillBatchCode),JSON.parse(i.printData),!1,null==i.pBillCode?i.pBillBatchCode:i.pBillCode):i.action==r.action.POS?r.doPos(i):e:e},doDowloadPrint:function(e,t){var n={type:"bill",billBatchCode:t},r=this.opt.url+"/api/"+this.opt.type+"/downloadBillTemplate",i=this.paramBulid(this.opt,"1.0",n,"");return r+="?tempId="+e,r+="&appid="+i.appid,r+="&data="+i.data,r+="&noise="+i.noise,r+="&sign="+i.sign,r+="&version="+i.version,r+="&id="+i.id,r+="&fromType="+i.fromType,i.region&&i.deptcode&&(r+="&region="+i.region,r+="&deptcode="+i.deptcode),r},getEBillPicFile:function(e,t,n){var r={billNo:e,billBatchCode:t,random:n},i=this.opt.url+"/api/"+this.opt.type+"/getEBillPicFile",a=this.paramBulid(this.opt,"1.0",r,"");return i+="?billNo="+e,i+="&billBatchCode="+t,i+="&random="+n,i+="&appid="+a.appid,i+="&data="+a.data,i+="&noise="+a.noise,i+="&sign="+a.sign,i+="&version="+a.version,i+="&id="+a.id,i+="&fromType="+a.fromType,a.region&&a.deptcode&&(i+="&region="+a.region,i+="&deptcode="+a.deptcode),i},getListDetailFile:function(e,t,n,r){var i={billNo:e,billBatchCode:t,random:n,pageSize:r},a=this.opt.url+"/api/"+this.opt.type+"/printElectBillList",o=this.paramBulid(this.opt,"1.0",i,"");return a+="?billNo="+e,a+="&billBatchCode="+t,a+="&random="+n,a+="&pageSize="+r,a+="&appid="+o.appid,a+="&data="+o.data,a+="&noise="+o.noise,a+="&sign="+o.sign,a+="&version="+o.version,a+="&id="+o.id,a+="&fromType="+o.fromType,o.region&&o.deptcode&&(a+="&region="+o.region,a+="&deptcode="+o.deptcode),a},doPreView:function(t,n,r,e){var i,a=this.getInstance();i=e?a.getPrintSet({ModuleId:e}):a.getPrintSet({ModuleId:"00000000"}),$.when(i).done(function(e){return a.doPreview({LoadReportURL:t,PrintSet:e,PrintData:n,PrintPreview:r,ShowForm:r,BillPrint:!0,PrintCallBack:function(){},ProcessChange:function(e,t,n){}}).done(function(){}).fail(function(){})})},doPrintRemoteImage:function(t,n,e){var r,i=this.getInstance();r=e?i.getPrintSet({ModuleId:e}):i.getPrintSet({ModuleId:"00000000"}),$.when(r).done(function(e){return i.doPrintRemoteImage({PrintSet:e,Url:t,PrintPreview:n,ShowPrintSet:!1,ShowMode:4,Name:"",PrintCallBack:function(){},ProcessChange:function(e,t,n){}}).done(function(){}).fail(function(){})})},doPrintRemoteImageList:function(t,n,e){var r,i=this.getInstance();r=e?i.getPrintSet({ModuleId:e}):i.getPrintSet({ModuleId:"00000000"}),$.when(r).done(function(e){return i.doPrintRemoteImage({PrintSet:e,Url:t,PrintPreview:n,ShowPrintSet:!1,ShowMode:4,Name:"",PrintCallBack:function(){},ProcessChange:function(e,t,n){}}).done(function(){}).fail(function(){})})},printerSet:function(e){var t=$.Deferred();return e?this.getInstance().setPrinter({ModuleId:e}).done(function(e){}).fail(function(e){}):(alert("批次号不能为空"),t)},paramBulid:function(e,t,n,r){var i=Base64.encode(JSON.stringify(n)),a=require.sync(["bs-http-plugin/util/uuid"])[0].v4().replace(/-/g,"");""==r&&(r=a);var o="";e.region&&e.deptcode&&(o="region="+e.region+"&deptcode="+e.deptcode+"&"),o=o+"appid="+e.appId+"&data="+i+"&noise="+r+"&key="+e.appKey+"&version="+t;var s="";s=(s=$.md5(o)).toUpperCase();var l={appid:e.appId,data:i,noise:r,sign:s,version:t,fromType:"js",id:a};return e.region&&e.deptcode&&(l.region=e.region,l.deptcode=e.deptcode),l},printPaperBill:function(r,e,i){var a=this,t=$.Deferred();if(!r)return alert("请求参数不能为空"),t;r=$.extend({},{pBillBatchCode:null,pBillNo:null},r);var n=a.paramBulid(a.opt,e,r,"");return bossJS.Socket.sendByIframe({url:a.opt.url+"/api/"+a.opt.type+"/printPaperBill",data:n}).then(function(e){var t=a.decodeResult(e);if("S0000"!=t.result)return t;var n=JSON.parse(t.message);return a.doPreView(a.doDowloadPrint(n.templateID,r.pBillBatchCode),JSON.parse(n.printData),i,null==r.pBillCode?r.pBillBatchCode:r.pBillCode)}).fail(function(e){return e})},printPbill:function(r,e,i){var a=this,t=$.Deferred();if(!r)return alert("请求参数不能为空"),t;r=$.extend({},{billBatchCode:null,billNo:null,pBillBatchCode:null,pBillNo:null,placeCode:null,operator:null},r);var n=a.paramBulid(a.opt,e,r,"");return bossJS.Socket.sendByIframe({url:a.opt.url+"/api/"+a.opt.type+"/turnPaperPrint",data:n}).then(function(e){var t=a.decodeResult(e);if("S0000"!=t.result)return t;var n=JSON.parse(t.message);return a.doPreView(a.doDowloadPrint(n.templateID,r.pBillBatchCode),JSON.parse(n.printData),i,null==r.pBillCode?r.pBillBatchCode:r.pBillCode)}).fail(function(e){return e})},printElectBill:function(r,e,i){var a=this,t=$.Deferred();if(!r)return alert("请求参数不能为空"),t;r=$.extend({},{billBatchCode:null,billNo:null},r);var n=a.paramBulid(a.opt,e,r,"");return bossJS.Socket.sendByIframe({url:a.opt.url+"/api/"+a.opt.type+"/getEBillPic",data:n}).then(function(e){var t=a.decodeResult(e);if("S0000"!=t.result)return t;var n=JSON.parse(t.message);return a.doPrintRemoteImage(a.getEBillPicFile(n.billNo,n.billBatchCode,n.random),i,r.moduleId)}).fail(function(e){return e})},printElectBillList:function(r,e){var i=this,t=$.Deferred();if(!r)return alert("请求参数不能为空！"),t;if(!r.total)return alert("请求参数：总页数不能为空！"),t;if(!r.pageNoBgn)return alert("请求参数：起始页码不能为空！"),t;if(!r.pageNoEnd)return alert("请求参数：终止页码不能为空！"),t;if(r.total<0)return alert("总页数小于0，不打印！"),t;if(r.pageNoBgn<0)return alert("起始页码小于0，不打印！"),t;if(r.pageNoEnd<0)return alert("终止页码小于0，不打印！"),t;if(r.pageNoBgn>r.pageNoEnd)return alert("起始页码大于终止页码，不打印！"),t;if(r.pageNoBgn>r.total)return alert("起始页码大于总页数，不打印！"),t;if(r.pageNoBgn>r.total)return alert("终止页码大于总页数，不打印！"),t;r=$.extend({},{billBatchCode:null,billNo:null},r);var n=i.paramBulid(i.opt,e,r,"");return bossJS.Socket.sendByIframe({url:i.opt.url+"/api/"+i.opt.type+"/getEbillListImgPageCnt",data:n}).then(function(e){var t=i.decodeResult(e);if("S0000"!=t.result)return t;for(var n=r.pageNoBgn;n<=r.pageNoEnd;n++)i.doPrintRemoteImageList(i.getListDetailFile(r.billNo,r.billBatchCode,r.random,n),!1,r.moduleId)}).fail(function(e){return e})},decodeResult:function(e){var t=JSON.parse(Base64.decode(e.data));return{result:t.result,message:Base64.decode(t.message)}},doPos:function(e){var t=this.getPOSInstance(),n={totalAmt:e.amt,posNo:"",posPNo:"",transDate:"",transNo:"",transVoucher:"",letterNo:e.payCode,transType:"00",account:""};t.doPos(n).done(function(e){console.log(e),e.resultCode}).fail(function(){alert(222)})}}}();
//# sourceMappingURL=industry-proxy-app.js.map
